% \begin{table}[h!]
% % \tiny
% % \fontsize{0.1}{0.11}

% \fontsize{3pt}{3pt}\selectfont

% \centering
% \begin{tabular}{l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l}

% \multicolumn{2}{c}{Preamble}						&	Sync msg 			&	PHDR  														&	PHDR-CRC 																	&	\multicolumn{15}{c}{PHY Payload}																																																																																																																																																																																																																																																																																				&	\multicolumn{2}{c}{CRC }										\\\hline
% \multicolumn{2}{c}{}										&	0-8 Byte			&																		&																						&	\multicolumn{15}{c}{ <255 Byte}																																																																																																																																																																																																																																																																																					&	\multicolumn{2}{c}{2 Byte}									\\\hline
% Modulation	&	length										&								&	Opt																&	Optional CRC															&	\multicolumn{3}{c}{MHDR }																																&	\multicolumn{11}{c}{MAC Payload}																																																																																																																																																																								&																							&																								& MIC 													&	CRC Type		&	Polynomial										\\\hline
% LoRa				&	8 Symbols									&								&																		&																						&	\multicolumn{3}{c}{1 Byte}																															&	\multicolumn{11}{c}{M Byte }																																																																																																																																																																										&																							&																								& 4 Byte												&	IBM					&	$x^{16} + x^{15} + x^{5} + 1$	\\\hline
% 						&	0x34 											&								&																		&																						&															&															&															&																											&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																& 						&	0x1021												\\\hline
% 						&														&								&																		&																						&															&															&															&																											&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																&							&																\\\hline
% GFSK				&	5 Bytes										&								&																		&																						&															&															&															&																											&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																&	CCITT				&	0x8005												\\\hline
% 						&	0xC194C1 									&								&	It contains 											&	Phy CRC 																	&	MType												&	RFU													&	Major												&	\multicolumn{9}{c}{FHDR }																																																																																																																																																											&																	&	FPort 																			&	FRMPayload 																		&																&							&	$x^{16} + x^{12} + x^{5} + 1$	\\\hline
% 						&														&								&	Length  													&																						&	3 Byte											&	3 Byte											&	2 Byte											&	\multicolumn{9}{c}{7-22 Byte}																																																																																																																																																									&																	&	0-1 Byte																		&	N Byte 																				&																&							&																\\\hline
% 						&														&								&	ode rate 													&																						&	Msg type										&	Reserved										&	Msg format									&																											&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																&							&																\\\hline
% 						&														&								&	CRC 															&																						&															&															&															&																											&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&															&															&															&																											&														&																							&																		&																			&																																	&																																		&																	&	0	commands only															&	Encrypted  Data																&																&							&																\\\hline
% 						&														&								&	\multicolumn{2}{c}{cr=4/8}																										&															&															&															&																											&														&																							&																		&																			&																																	&																																		&																	&	1-223	Application Specific									&																								&																&							&																\\\hline
% 						&														&								&															 			&																						&	000	Join Request						&															&	00			LoRaWAN R1					&	\multicolumn{2}{c}{Dev Address}											&	\multicolumn{5}{c}{FCtrl }																																																																																													&	FCnt 																															&	FOpts 													&	224 225	RFU																	&																								&																&							&																\\\hline
% 						&														&								&															 			&																						&	001	Join Accept							&															&	01-11		RFU									&	\multicolumn{2}{c}{4 Byte}													&	\multicolumn{5}{c}{1 Byte}																																																																																													&	2 Byte																														&	0-15 Byte												&																							&																								&																&							&																\\\hline
% 						&														&								&	\multicolumn{2}{c}{20 bit long}																								&	010	Unconfirmed $\uparrow$	&															&															& 											&															&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&	011	Unconfirmed $\downarrow$&															&															&												&															&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&	100	Confirmed $\uparrow$		&															&															&	NwkID 								&	NwkAddr 										&	ADR 											&	ADRACKReq 																	&	ACK 															&	FPending /RFU												&	FOptsLen 																												&	2 type of counters  																							&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&	101	Confirmed $\downarrow$	&															&															&	31-25th								&	24-?0th											&	7th												&	6th																					&	5th																&	4th																	&	3-0th																														&	FCnt$\uparrow$: counter for $\uparrow$ link												&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&	110	RFU											&															&															&												&															&														&																							&																		&																			&																																	&	FCnt$\downarrow$: counter for $\downarrow$ link										&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&	111	Proprietary							&															&															&												&															&														&																							&																		&																			&																																	&																																		&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&															&															&															&												&															&	1	data rate								&	1	if  >= 																		&	1	data message										&	1	ask windows												&	FOpts length  																									&	MAX-FCNT-GAP																											&																	&																							&																								&																&							&																\\\hline
% 						&														&								&																		&																						&															&															&															&												&															&	0	No change								&	0	otherwise																	&	0	otherwise												&	0	otherwise													&																																	& MAX-FCNY-GAP																											&																	&																							&																								&																&							&																\\\hline

% \end{tabular}
% \caption{\label{tab:Table} An example table.}
% \end{table}


\begin{figure}
\tiny
\begin{bytefield}[bitwidth=6.3em]{22}
	\bitheader{0-21}                                                  \\
	\y{2}{Preamble}																		&	\y{1}{Sync msg} 			&	\y{1}{PHY Header}  			&	\y{1}{PHDR-CRC} 			&	\y{15}{PHY Payload}																																																																																																																													&	\y{2}{CRC }	                          \\
	\y{1}{Modulation}					&	\y{1}{length}					&	\y{1}{Sync msg} 			&	\y{1}{PHY Header}  			&	\y{1}{PHDR-CRC} 			&	\y{3}{MAC Header}																	&	\y{11}{MAC Payload}																																																																																															& \y{1}{MIC}	&	\y{1}{CRC Type}		&	\y{1}{Polynomial}	\\		
	\y{1}{Modulation}					&	\y{1}{length}					&	\y{1}{Sync msg} 			&	\y{1}{PHY Header}  			&	\y{1}{PHDR-CRC} 			&	\y{1}{MType}	&	\y{1}{RFU}	&	\y{1}{Major}				&	\y{9}{Frame Header }																																																																															&	\y{1}{FPort} 	&	\y{1}{Frame Payload}		& \y{1}{MIC}	&	\y{1}{CRC Type}		&	\y{1}{Polynomial}	\\
	\y{1}{Modulation}					&	\y{1}{length}					&	\y{1}{Sync msg} 			&	\y{1}{PHY Header}  			&	\y{1}{PHDR-CRC} 			&	\y{1}{MType}	&	\y{1}{RFU}	&	\y{1}{Major}				&	\y{2}{Dev Address}										&	\y{5}{FCtrl }																																									&	\y{1}{FCnt} 		&	\y{1}{FOpts} 		&	\y{1}{FPort} 	&	\y{1}{Frame Payload}		& \y{1}{MIC}	&	\y{1}{CRC Type}		&	\y{1}{Polynomial}	\\	
	\y{1}{Modulation}					&	\y{1}{length}					&	\y{1}{Sync msg} 			&	\y{1}{PHY Header}  			&	\y{1}{PHDR-CRC} 			&	\y{1}{MType}	&	\y{1}{RFU}	&	\y{1}{Major}				&	\y{1}{NwkID} 				&	\y{1}{NwkAddr} 	&	\y{1}{ADR} 		&	\y{1}{ADRACKReq} 	&	\y{1}{ACK} 	&	\y{1}{FPending /RFU}	&	\y{1}{FOptsLen}			&	\y{1}{FCnt} 		&	\y{1}{FOpts} 		&	\y{1}{FPort} 	&	\y{1}{Frame Payload}		& \y{1}{MIC}	&	\y{1}{CRC Type}		&	\y{1}{Polynomial}	\\
\end{bytefield}
% \caption{LoRaWAN frame format.\cite{augustin-study-2016}}\label{fig:jhjh}
\end{figure}

\scriptsize
%\newgeometry{}

\begin{multicols}{2}
\begin{itemize}

	\item Preamble:
	\Itemize{
	\item Modulation :
		\Itemize{
			\item Lora:  8 Symbols, 0x34 (Sync Word)
			\item FSK:  5 Bytes, 0xC194C1 (Sync Word)
		}
	\item Length :
	}

	\item Sync msg 

	\item PHY Header:  It contains:
	\begin{itemize}
		\item The Payload length (Bytes)
		\item The Code rate
		\item Optional 16bit CRC for payload 
	\end{itemize}


	\item Phy Header CRC  It contains CRC of Physical Layer Header
	
	\item PHY Payload:  It contains:
	\itemize{
		\item MAC Hearder 
		\Itemize{
			\item MType:  is the message type (uplink or a downlink)
			\Itemize{
				\item whether or not it is a confirmed message (reqst ack)
				\item 000 	Join Request
				\item 001 	Join Accept
				\item 010 	Unconfirmed Data Up
				\item 011 	Unconfirmed Data Down
				\item 100 	Confirmed Data Up
				\item 101 	Confirmed Data Down
				\item 110 	RFU
				\item 111 	Proprietary
			}
			\item RFU  Reserved for Future Use
			\item Major:  is the LoRaWAN version; currently, only a value of zero is valid
			\Itemize{
				\item 00 	LoRaWAN R1
				\item 01-11 	RFU

			}
		}

		\item MAC Payload :
		\Itemize{
			\item Frame Header
			\Itemize{
				\item DevAddr:  the short address of the device
				\begin{itemize}
					\item NwkID  (Network ID): 31th to 25th
					\item NwkAddr  (Network Address): 24th to 0th
				\end{itemize}	

				\item Fcrtl 
				\Itemize{
					\item ADR  Network server will change the data rate through appropriate MAC commands
					\begin{itemize}
						\item 1  To change the data rate
						\item 0  No change
					\end{itemize}
					\item ADRACKReq  (Adaptive Data Rate ACK Request): if network doesn't respont in 'ADR-ACK-DELAY' time, end-device switch to next lower data rate.
					\begin{itemize}
						\item 1  if (ADR-ACK-CNT) >= (ADR-ACK-Limit)
						\item 0  otherwise
					\end{itemize}

					\item ACK  (Message Acknowledgement): If end-device is the sender then gateway will send the ACK in next receive window  else if gateway is the sender then end-device will send the ACK in next transmission.
					\begin{itemize}
						\item 1  if confirmed data message
						\item 0  otherwise
					\end{itemize}

					\item FPending$\downarrow$ /RFU $\uparrow$ : (Only in downlink), if gateway has more data pending to be send then it asks end-device to open another receive window ASAP
					\begin{itemize}
						\item 1  to ask for more receive windows
						\item 0  otherwise
					\end{itemize}

					\item FOptsLen  is the length of the FOpts field in bytes Â  0000 to 1111 

				}
				\item FCnt:  2 type of frame counters 
				\begin{itemize}
					\item FCntUp:  counter for uplink data frame, MAX-FCNT-GAP
					\item FCntDown:  counter for downlink data frame, MAX-FCNY-GAP
				\end{itemize}
				         
				\item FOpts  is used to piggyback MAC commands on a data message	
			}

			\item FPort:  a multiplexing port field
			\Itemize{
				\item 0  the payload contains only MAC commands
				 \item 1 to 223  Application Specific
				 \item 224 \& 225  RFU
			}

		    \item FRMPayload (Frame Payload)  Encrypted (AES, 128 key length) Data                                 
		}

		\item MIC:  is a cryptographic message integrity code
		\Itemize{
			\item computed over the fields MHDR, FHDR, FPort and the encrypted FRMPayload.
		}
	}
	\item CRC  (only in uplink), 
	\begin{itemize}
		\item CCITT  $x^{16} + x^{12} + x^{5} + 1$
		\item IBM  $x^{16} + x^{15} + x^{5} + 1$
	\end{itemize}
\end{itemize}

\end{multicols}

	% \item[B] indicates that the network server has additional data to send
	% \item[CID] is the MAC command identifier
	% \item[Args] are the optional arguments of the commands
