Distributed Radio Listening Synchronization Using Rendezvous Chain Based on TSCH
Byeong-Hwan Bae, Sang-Hwa Chung, Hee-Jun Lee Department of Electrical, Electronics and Computer Engineering
Pusan National University Busan, South Korea
bbh2002@pusan.ac.kr, shchung@pusan.ac.kr, cokacider@gmail.com

Abstract‚Äî The TSCH mode of IEEE 802.15.4 is adopted as a network stack of IETF Working Group 6TiSCH for IoT environment with high reliability, low power and excellent network characteristics. In the TSCH network forming the network through frequency channel hopping, a fast network synchronization is possible by using the parallel rendezvous scheme which exchanges packets before synchronization the network. In this paper, we propose a distributed radio listening synchronization scheme that induces fast network formation by forming a rendezvous chain that divides the network radio listening channel based on the parallel rendezvous technique
Keywords‚ÄîIEEE 802.15.4; Parallel Rendezvous; Fast synchronization Scheme; time-slotted channel hopping (TSCH)
I. INTRODUCTION
In 2012, the IEEE announced the new IEEE 802.15.4e [1] that extends the existing IEEE 802.15.4 (2011) [2] Medium Access Control (MAC) functionality to address the new demands of industrial applications and is included in IEEE 802.15.4 (2015) [3]. IETF 6TiSCH Working Group [4] adopts CoAP [5], 6LoWPAN [6] and RPL [7] as protocols for industrial IoT, and adopts IEEE 802.15.4 Time Slotted Channel Hopping (TSCH) mode as MAC stack. TSCH combines time-slot access with multiple-channel and channel-hopping techniques to demonstrate high reliability and low-power operation.
In the Internet of Things (IoT) environment, energy consumption is the most important because nodes operate mainly on batteries and energy is limited. TSCH uses Radio Duty Cycle (RDC) based on Time Division Multiple Access (TDMA), By assigning dedicated cells. So transmission is possible without interference. Data transmission in the TSCH is done in units of timeslots, and a bundle of timeslots constitutes a slotframe. A link is defined as a slot having the same combination of time and channel offset for the node to communicate. A link can be shared by more than one node, in which case contention is resolved using Carrier-Sense Multiple Access (CSMA). All nodes participating in the network repeat the scheduled slotframes and can do one of the transmit, receive, and sleep operations in the timeslot to reduce RDC, which is the majority of the node energy usage. Also, it is robust against multipath fading because it changes channels to be used through channel hopping every slot.
This paper focuses on the TSCH network formation process. The TSCH uses a Directed Acyclic Graph (DAG) based on a

coordinator, also known as a sink, to create a globally synchronized mesh network. The network begins when the coordinator advertises the presence of the network by sending an Enhanced Beacon (EB) frame containing the information needed for the connection.
The IEEE 802.15.4 TSCH standard does not propose an advertising strategy associated with the EB and does not indicate which channels transmit at what rate. The process of forming the TSCH network is very important in terms of energy consumption. The node trying to connect to the network scans the available channels and attempts to detect the presence of the network. At this point the node is waiting for the EB to turn on the radio and continue listening to the EB, and the RDC is 100%. So as the synchronization of the network is delayed, the energy consumption increases rapidly. Considering that the slot frame with 101 timeslots including 1 Shared Timeslot is about 1% of RDC, the energy consumption before network synchronization is very large.
The authors of [8] proposed a parallel rendezvous-based algorithm called PRV-TSCH. Create a "synchronized" cluster while searching for channels between nodes that are not yet synchronized to the network. This method is known as a parallel rendezvous strategy in cognitive radio networks [9]. Collecting neighbor node information by sending and receiving data at this time is an attractive option because the energy consumption overhead is very small, because the RDC is 100% where the nodes are not synchronized.
In this paper, we propose a distributed radio listening technique to create a rendezvous chain with node information of each other using parallel rendezvous strategy and to reduce packet reception failure due to inconsistency of EB receive channel. By forming a rendezvous chain that listens to the EB reception channel separately, it increases the probability of EB reception of the chain and enables nodes to synchronization the network fast.
There are two contributions in this paper.
1. Reduce energy consumption for each node's network participation by inducing fast synchronization of the network.
2. Helps provide immediate data by speeding up bootstrapping time.

978-1-7281-1340-1/19/$31.00 ¬©2019 IEEE

283

ICUFN 2019

The relevant studies for TSCH fast network synchronization are covered in Chapter 2. Chapter 3 describes the basic synchronization method defined by the standard, and the Parallel Rendezvous method network vaporization proposed in [8]. Chapter 4 describes the detailed method of DRL - TSCH, which is presented in this paper. Chapter 5 simulation results are evaluated in a formal mesh topology using a 6TiSCH simulator. Finally, chapter 6 presents conclusions and future research.

In (1), ASN is the absolute slot number, which is the number of slots that increase immediately after the network starts, and CHoffset is used to determine the channel to use in (1). Because each time slot is communicated on a different channel, it is resistant to multipath fading. Assuming that the nodes start searching almost simultaneously, the time required for all nodes to connect to the TSCH network increases with the size of the network.

II. RELATE WORK
The IEEE 802.15.4 standard does not define how to schedule EBs. Several EB scheduling algorithms contribute to fast network synchronization.
The authors of [10] proposed to increase the number of EB transmission slots. Increasing the number of EB slots increases the synchronization speed, but there is a trade-off relationship that increases energy consumption and reduces throughput.
In [11], the author proposes four strategies to reduce the time required to connect to the network. The authors propose Random Vertical Filling (RV), which is an algorithm for randomly determining channel offset and EB transmission, and Random Horizontal Filling (RH) algorithm, which schedules EB by randomly selecting one of multi-slot frames. The authors propose two algorithms, Enhanced Coordinated Vertical Filling (ECV) and Enhanced Coordinated Horizontal Filling (ECH), for cases where there is a powered coordinator in subsequent studies.
In [12], in order to reduce the probability of collision, the node transmitting the EB transmits the EB message stochastically. The transmission probability is autonomously derived by each node according to the number of neighbors.
The author of [8] proposes an algorithm based on Parallel Rendezvous. The algorithm is discussed in detail in Chapter 3, and does not conflict with other EB scheduling techniques, so it can be said that better performance can be achieved if applied with the EB scheduling technique.
III. TSCH SYNCHRONIZATION
A. Passive Scan ‚ÄìTSCH
The passive scan algorithm is a basic network synchronization method proposed by IEEE 802.15.4. The TSCH network is synchronized when the coordinator sends an EB that contains all the information needed by the other node and receives it. First, the network configuration starts with one coordinator.When a node receives an EB packet transmitted by a coordinator, the receiving node performs TSCH synchronization, and a node participating in the network transmits an EB packet to expand the network.A node that is not synchronized with the network starts at any point in the channel vector V and listens to that channel's radio for a specific scan period and changes the next channel in V in a round robin fashion. Channel hopping in the TSCH is done using (1).

B. Parallel Rendezvous - TSCH
The core of the PRV (Parallel Rendezvous) - TSCH scheme proposed in [8] is to transmit a packet containing channel information of a node called RB (Rendezvous Beacon) while a node not yet synchronized with the network scans the channel. If the node receives the RB during the scan period, it adds it as a rendezvous neighborhood and stores the channel hopping sequence and timing information of the node. When EB is received and synchronized to the network, it confirms the channel hopping configuration and timing information of the rendezvous neighbor node, and sends EB to the listening channel of the rendezvous neighbor so that the nodes of the rendezvous neighbor are immediately synchronized with the network.
In Fig 1, node 1 is the coordinator in the linear topology. PS - TSCH node 3 is able to receive EB when node 2 receives EB from node 1, synchronizes the network, and then transmits EB. Similarly, when node 3 synchronizes the network, node 4 also synchronizes the network can do. In PRV - TSCH, 2, 3, and 4 nodes that have not yet synchronized the network are transmit RB to form a cluster that knows channel hopping information and timing information. The nodes of each hop send the EB directly to the scan channel of the rendezvous neighbors immediately after the network synchronize, so that the participation time of all nodes in the network is much shorter than that of PS - TSCH.
The RBs are transmitted periodically using the ALOHA mechanism and they wait for a short random time before transmitting each RB to prevent collision of the RBs from other nodes. In linear topology, PRV - TSCH has the most obvious performance effect. Conversely, if you configure a mesh topology, one node can receive EBs from several other nodes, and you can send EBs to other nodes. If the node is able to receive EBs from several other nodes, the performance gain is less than that of the linear topology because the probability of EB reception increases. In addition, the EB reception delay due to the mismatch between the transmission channel and the reception channel between the node not in the cluster member and the node in the rendezvous cluster is the same. Since the RB packet is transmitted unilaterally, the node that receives the RB packet knows the information of the node through the RB packet, but the transmitting node does not know the information of the received node because there is no mechanism to return the RB packet.

Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂ Ì†µÌ∞∂ Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂Ì†µÌ∞∂ÔøΩ Ì†µÌ∞¥Ì†µÌ∞¥Ì†µÌ∞¥Ì†µÌ∞¥Ì†µÌ∞¥Ì†µÌ∞¥ Ì†µÌ∞¥ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ] mod ÔøΩÔøΩ (1)

Fig 1. 3-hop Linear Topology

284

Fig 2. ERB Packet configuration

Fig 3. Example of DRL - TSCH
IV. DISTRIBUTED RADIO LISTENING ‚Äì TSCH
In general, a node is in an environment capable of transmitting EBs to multiple nodes and can receive EBs from other nodes. In order to increase the probability of EB reception, DRL - TSCH forms a rendezvous chain to divide and listen to EB reception channel. The nodes in the network receive the information of ERB (Enhanced Rendezvous Beacon) channel vector and channel hopping information and timing information of Fig 2. At this time, it is decided whether or not to divide the channel vector in half by the information of the received channel vector. The payload of the ERB packet contains a 1-byte channel index and 4-byte timing information. In 3-byte Rendezvous Chain info, it consists of 2bytes of node ID, which is the last 2byte address of the node composing the rendezvous chain, and 1byte, which contains channel vector information. After receiving the ERB, the node ID information is transmitted immediately to the node that transmitted the ERB, so that both nodes have the rendezvous information of each other.
Fig 3. shows the approximate process of forming a rendezvous chain. "N-M ch" means a channel vector having N channels, and M means that the channel vector is composed of odd and even channels of the channel vector before division. If a channel vector belongs to the same or different channel vector, the channel can be divided. In (a), all nodes have channel vectors

with 16 channels, hopping 16 channels and listening to the radio. (b), when nodes a and d receive ERB packets from b and c, respectively, they construct a channel vector of "8-0ch" and send ERB packets to b and c. b and c form an 8-1ch channel vector and form a-b and c-d rendezvous chains. (b), nodes a and d use the same channel vector. Therefore, when ERB packets are exchanged, they are divided into "4-0ch" vector and "4-1ch" vector, and can lead to rendezvous chain as shown in (c). Since the channel hopping information of a and d has changed, each node informs the neighboring node of the changed channel hopping information. In (c), since the channel vector of node c belongs to the channel vector of node f, in (d), when ERB packet is exchanged between c and f, channel vector can be divided and rendezvous chain can be formed. The channel vector may continue to be divided until the channel is equal to one. A node with an ERB 1 channel vector is registered as a rendezvous chain, but the channel is not split.
Algorithm 1 shows four situations in which a node forms a rendezvous chain for distributed radio listening of nodes before synchronizing to the network.
1) When it is time to send ERB, it will cycle through all channel vector CHHVall to use and send ERB to the corresponding channel.
2) When it is time to change the channel being scanned, the channel is changed in the channel hopping vector (CHHVuse).
3) Upon receipt of the EB, it immediately synchronizes to the network, and sends EBs to each scan channel to the rendezvous chain members.
4) When ERB packet is received, it checks the rendezvous chain information in CheckRendezuousChain () to check whether it forms a rendezvous chain with the currently received node, and updates and skips only if the channel hopping vector has changed.
Next, if the ERB packet is an ERB return packet including its own node ID, CHHVuse is changed to the CHHVuse of the ERB packet and added to the rendezvous chain and then skipped. The ID of a node can be duplicated, but it is very unlikely. Even if a wrong ERB is received, there is no problem in network synchronization because only the channel vector is changed. If CHHVuse is 1, the channel is skipped because it is no longer possible to divide the channel. CompareChHV examines the received ERB packet information and, if it has the same channel vector or an included channel vector, divides the channel in Divide (CHHV, RCinfo) and updates the CHHVuse. And immediately informs the node that sent the ERB of the changed channel vector. If there is a node forming the rendezvous chain, it sends the changed channel hopping vector to inform the

285

rendezvous chain node. The average time that a node receives an ERB is proportional to the probability of sending an ERB and the number of neighboring nodes transmitting a neighboring ERB (2).

Ì†µÌ∞∏Ì†µÌ∞∏Ì†µÌ∞∏Ì†µÌ∞∏Ì†µÌ∞∏Ì†µÌ∞∏ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ

=

ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ‚àóÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ‚àóÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ

(2)

If the period or probability of transmitting an ERB increases, the packet collision will increase, so it should be transmitted with an appropriate period and probability.

Algorithm 1 DRL - TSCH

1: Rendezvouschain (rendezvous chain)

2: CHHVall( e.g : {11,12,13,..,26} )

3: CHHVuse (channel hopping vector) = CHHVall

4: Indexscan (random integer)

5: Indexerb (random interger)

6:

7: while not Sync do

8: if ERB Send timing then

9: Indexerb = Indexerb + 1

10: Send ERB with Indexerb mod CHHVall Num

11: end if

12: if Scan Channel change timing then

13: Indexscan = Indexscan + 1

14: Scan Channel = Indexscan mod CHHVuse Num

15: end if

16: if EB received then

17: Sync

18: for each Rendezvouschain do

19: calculate current channel of chain

20: create EBs for Rendezvouschain

21: send to EB with chain channel

22: end for

23: end if

24: if ERB received then

25: if CheckRendezuousChain(RCinfo) then

26:

continue

27: end if

28: if isReturn then

29:

CHHVuse = ERB CHHV

30:

Add Rendezvouschain

31:

continue

32: end if

33: if CHHVuse == 1 then

34:

continue

35: end if

36: if CompareChHV(RCinfo) then

37:

CHHVuse = Divide (CHHV, RCinfo)

38:

create ERB with CHHV remainder

39:

send to return ERB with chain channel

40:

send to ERB with Rendezvouschain

41: end if

42: end if

43: end while

V. EVALUATION
A. E xperiment Setup
The simulation was performed using the 6TiSCH simulator [13] with the TSCH stack implemented. In order to evaluate the mechanism performance of the PS - TSCH, PRV - TSCH and DRL - TSCH schemes proposed in this paper, a 7 * 7 grid mesh topology is constructed as shown in Fig 4. In the middle, a coordinator is placed, each node can communicate with eight nodes and receive EBs (C group 5node, D group 3node), and each link PDR is set to 100%. With the start of the network, the coordinator starts to send EBs. With PRV - TSCH and DRL TSCH, all nodes except the coordinator wait for RB and ERB for a short random time after network start, then start to transmit each and send and receive node information. A, B, C, and D groups were measured according to each hop distance of the coordinator and the number of surrounding nodes capable of receiving EBs. The energy consumption measurement was calculated with reference to the energy consumption according to the radio chip specification of cc2538. Shared slots are placed in the first slot of the slot frame. In order to reduce the collision, EB is transmitted with a 16% probability with the shared slot which is the first time slot of the slot frame, RB and ERB transmit at a 16% probability per second.

TABLE I

Simulator Setup

6TiSCH Simulator

Slot Frame

101 slot (Shared Slot 1)

Slot Length

10ms

Scan Period

10ms

EB,RB,ERB Probability 16%

Number of run

100

MAC

TSCH

Fig 4. Experiment 7 * 7 mesh topology

286

Fig 5. (a) PS - TSCH, (b) PRV - TSCH, and (c) DRL - TSCH network Sync time distribution per group

Fig 6. Average energy consumption per group
B. Result
Figure 5 shows the time distribution of measured network synchronization for each node group. When using the parallel rendezvous technique, PRV - TSCH and DRL - TSCH improve performance as the coordinator's hop increases. Through the box plot, we can observe that the synchronization time deviations are wide in the PS - TSCH and the deviation from PRV - TSCH is narrower than DRL - TSCH. The average network synchronization time for each group was reduced by 10%, 16%, 18%, and 10%, respectively, in DRL - TSCH compared to PRV - TSCH. D group has three neighbors, so the probability of receiving EB or ERB is lower than the other groups. Therefore, the performance improvement was slightly lower.
In Fig 6, the energy consumption consumed by each group was measured. The energy consumption of each group decreased slightly with PRV - TSCH and DRL - TSCH, and energy consumption decreased by about 210mJ, 476mJ, 527mJ, and 476mJ until synchronized with each group average.

Fig 7. Total amount of energy consumed until synchronization
Fig 7. shows the sum of the energy consumption of the 48 nodes involved in network synchronization when the maximum number of available channels was limited. The difference of energy consumption of DRL - TSCH and PRV - TSCH was 21.7J for 16 channels, 20J for 8 channels, 6.8J for 4 channels and 5.7J for 2 channels. This shows that the performance improvement is reduced by decreasing the channel to divide. When DRL - TSCH receives an ERB, it immediately transmits ERB to the originating node to form a rendezvous chain, which shows that performance is improved even when using 2 channels. Even though the number of available channels is reduced, the performance difference between PS - TSCH and the other two schemes is that the other two methods send more EB packets. Both PRV - TSCH and DRL - TSCH transmit EBs to other rendezvous nodes when a node is synchronized to the network, sending more EBs than PS - TSCH.
VI. CONCLUSION
In this paper, we propose a technique to increase the listening probability of EB packets by using a rendezvous chain that divides channels by adding channel vector information and ID

287

information in RB packet of PRV - TSCH. Simulation results show better performance than PS - TSCH and PRV - TSCH using parallel rendezvous techniques. Parallel Rendezvous technology is a very attractive option because the energy overhead of packet transmission is very small, by sending and receiving packets while at 100% RDC. In Future research will be to investigate link quality measurement using network rendezvous chains before network synchronization and to study the optimal channel hopping sequence.
ACKNOWLEDGMENT
This research was supported by the MSIT(Ministry of Science and ICT), Korea, under the ICT Consilience Creative program(IITP-2019-2016-0-00318) supervised by the IITP(Institute for Information & communications Technology Planning & Evaluation).
This work was supported by the Korea Institute of Energy Technology Evaluation and Planning(KETEP) and the Ministry of Trade, Industry & Energy(MOTIE) of the Republic of Korea (No. 20182020109660).
REFERENCES
[1] IEEE 802.15.4e-2012. IEEE standard for local and metropolitan area networks. Part 15.4: Low-Rate Wireless Personal Area Networks (LRWPANs) amendment 1: MAC sublayer.
[2] IEEE 802.15.4-2011. Low-Rate Wireless Personal Area Networks (LRWPANs), Standard for Information Technology Standard

[3] IEEE Standard for Low-Rate Wireless Personal Area Networks (WPANs), IEEE Standard 802.15.4-2015, IEEE Computers Society, IEEE Standards Association, 2015.
[4] 6TiSCH Working Group, https://datatracker.ietf.org/wg/6tisch/charter/ rapid. rapid.
[5] Shelby Z, Hartke K, Bormann C. The constrained application protocol (CoAP), IETF RFC 7252, June 2014. Google Scholar
[6] Shelby Z, Chakrabarti S, Nordmark E, .Neighbor discovery optimization for IPv6 over Low-power Wireless Personal Area Networks (6LoWPANs), November 2012, IETF Standards. CrossRef
[7] T. Winter et al., RPL:IPv6 Routing Protocol for Low-Power and Lossy
Networks, RFC 6550, IETF, 2012.
[8] Carlos M. Garc√≠a Algora, Evelio M. Garc√≠a Fern√°ndez, Kris Steenhaut ,Parallel Rendezvous-Based Association for IEEE 802.15.4 TSCH Networks, IEEE SENSORS JOURNAL, VOL. 18, NO. 21, NOVEMBER 1, 2018
[9] L. C. Flores, V. A. Reguera, E. O. Guerra, D. R. S. Mora, F. B. Garrido, and E. A. Lopez, ‚ÄúExpected time to rendezvous in multihop cognitive radio networks,‚Äù in Proc. IEEE 9th Latin-Amer. Conf. Commun. (LATINCOM), Nov. 2017.
[10] T. P. Duy and Y. Kim, ‚ÄúAn efficient joining scheme in IEEE 802.15.4e,‚Äù in Proc. Int. Conf. Inf. Commun. Technol. Converg. (ICTC), Oct. 2015, pp. 226‚Äì229.
[11] E. Vogli, G. Ribezzo, L. A. Grieco, and G. Boggia, ‚ÄúFast network joining algorithms in industrial IEEE 802.15.4 deployments,‚Äù Ad Hoc Netw., vol. 69, pp. 65‚Äì75, Feb. 2018.
[12] D. De Guglielmo, A. Seghetti, G. Anastasi, and M. Conti, ‚ÄúA performance analysis of the network formation process in IEEE 802.15.4e TSCH wireless sensor/actuator networks,‚Äù in Proc. IEEE Symp. Comput. Commun. (ISCC). Funchal, Portugal, Jun. 2014, pp. 1‚Äì6.
[13] E. Municio, G. Daneels, M. Vucinic, S. Latre, J. Famaey, Y. Tanaka, K. Brun, K. Muraoka, X. Vilajosana, and T. Watteyne, "Simulating 6TiSCH Networks", Wiley Transactions on Emerging Telecommunications (ETT), 201

288

