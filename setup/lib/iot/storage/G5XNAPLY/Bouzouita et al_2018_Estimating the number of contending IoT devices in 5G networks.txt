Received: 3 May 2018 DOI: 10.1002/ett.3513

Revised: 15 July 2018

Accepted: 16 August 2018

SPECIAL ISSUE ARTICLE

Estimating the number of contending IoT devices in 5G networks: Revealing the invisible
Meriam Bouzouita1,2 Yassine Hadjadj-Aoul1 Nawel Zangar2 Gerardo Rubino3

1University of Rennes 1, Rennes, France 2Mediatron, SUP'COM, Ksar Hellal, Tunisia 3INRIA, Rennes, France
Correspondence Meriam Bouzouita, University of Rennes 1, 35042 Rennes, France; or Mediatron, SUP‚Ä≤COM, Ksar Hellal,Tunisia. Email: mariem.bouzouita@supcom.tn
Yassine Hadjadj-Aoul, University of Rennes 1, 35042 Rennes, France. Email: yhadjadj@irisa.fr
Nawel Zangar, Mediatron, SUP‚Ä≤COM, Ksar Hellal, Tunisia. Email: nawel.zangar@insat.rnu.tn
Gerardo Rubino, INRIA, Rennes, France. Email: Gerardo.Rubino@inria.fr

Abstract
The explosive growth of connected objects is certainly one of the most important challenges facing operators' network infrastructures. Although it has been foreseen for a very long time, it is still not clear how to support such huge number of devices efficiently. Indeed, although a smarter planning of dedicated access slots would certainly limit the burden, this remains limited since some equipments react to events, which cannot be timed. Moreover, barring some IoT devices from accessing the network, using Access Class Barring‚Äìlike techniques, is very efficient; nevertheless, efficiency is generally linked to precise knowledge of the number of contending devices. Although, before connection establishment, the terminals are invisible to access points, it is very difficult to estimate their number. A lower bound of backlogged devices can be determined. The average number of terminals can even be estimated with more or less precision, as this kind of problems comes to the classical ‚Äúballs-into-bins‚Äù problem, which was extensively analyzed in the literature. However, an overestimation of this number implies underutilization of resources whereas an underestimation may lead to a congestion collapse. In this way, we propose a lightweight change to the standard to accurately reveal the state of network congestion by overloading connections' requests with the number of access attempts (number of times the device has been barred as well as the number of attempts). Using such information, we propose an accurate recursive estimator of the number of devices. The obtained results demonstrated that the proposed solution not only makes it possible to estimate the number of equipment much better than existing techniques but also allows determining precisely the number of blocked equipments.

1 INTRODUCTION
The fast development of radio communications has led to a larger bandwidth demand putting more and more pressure on mobile network's operators (NOs). As a consequence, NOs are adapting to these changes by proposing the new standard 5G for mobile networks, which envisions to improve support for existing and future services in a more flexible and agile way. In this way, 5G1 will include not only improvements at the core network, which tends to be more virtualized, but also at the access network, which will undergo a massive arrival of the Internet of Things (IoT), behind which there are huge expectations. The excessive growth of the number of IoT2 devices represents a real challenge, which needs to be taken into account by NOs, at the risk otherwise of deteriorating all other services. Indeed, the limited radio resources, the random

Trans Emerging Tel Tech. 2018;e3513. https://doi.org/10.1002/ett.3513

wileyonlinelibrary.com/journal/ett

¬© 2018 John Wiley & Sons, Ltd. 1 of 16

2 of 16

BOUZOUITA ET AL.

access (RA) to the medium, and the spectrum sharing between different applications are critical issues in the IoT context.3 Therefore, radio networks need to be optimized to enable massive access of low-cost and energy-efficient IoT devices.4
Low-Power Wide Area Networks5 (LPWANs) were developed to meet all IoT requirements, since their main aims consist in ensuring energy-efficient, simple, and low-cost devices communicating in long range at a low bit rates. Many solutions emerged, particularly non‚Äìcellular IoTs, operating in unlicensed bands, such as LoRa and SigFox.6 These technologies have a fast deployment process focusing more on energy consumption, very long range and low data rate. Nevertheless, the MAC nature of such proprietary LPWAN technologies, ie, ALOHA-based access, is inefficient to face a massive access of IoT devices.7
More recently, the Third Generation Partnership Project (3GPP) adapted its cellular network to meet the IoT specifications and needs. In Release 13, a software upgrade of existing networks is provided to support the newly introduced Narrowband IoT8-10(NB-IoT) and the Extended Coverage GSM (EC-GSM) as cellular IoT solutions. 3GPP considers RAN overload control as the first priority improvement area; it introduced several overload resolution mechanisms in order to tackle the explosive growth of simultaneous IoT connections.11 Hence, several Physical Random Access Channel (RACH) overload resolution methods were defined to improve the support of such devices in LTE-Advanced networks. First, Access Class Barring (ACB) mechanism was defined by 3GPP in Release 8 as an access barring solution for all IoT transmission and an Extended Access Barring (EAB) was defined in Release 11 aiming to better prevent RAN overload.12
Many implementations of ACB and EAB were introduced in the literature to avoid congestion at the network's access.13-15 Nevertheless, these solutions fail to avoid a synchronized access of IoT devices. Indeed, since the eNodeB ignores the number of IoT devices willing to connect, it cannot predict accurately the overload status, which may lead to a congestion collapse.
In this regard, we focus our research work on improving the NB-IoT network by investigating the RACH for massive IoT accesses. We consider two main states, ie, the number of backlogged devices waiting for EAB check and the total number of devices that pass the EAB check and wait for the RA. As the number of contending devices is invisible until connection establishment, it is very hard to estimate it. In this paper, we propose new extensions and substantial improvements of our previous work. They are summarized in the following points:
‚Ä¢ we offer a detailed and up-to-date state of the art; ‚Ä¢ we extend our previous simple fluid model,16 which represents only one class of traffic, to study the access of multiclass
IoT devices into a mobile network; ‚Ä¢ we refine our initial estimate16 of the number of terminals, from the different classes of IoT traffic, that have attempted
the access; ‚Ä¢ we propose an estimation of the number of devices of different classes willing to connect. To the best of our knowledge,
this is the first work in the literature addressing this issue.
The most significant novelty of this paper is to propose an accurate and insightful recursive estimation technique of the number of contending devices for each class. Based on the radio resources in terms of successful, collided, or idle preambles, we can deduce the average number of terminals that attempted the access, and finally, we make a step backward to adjust the estimation of the backlogged terminals, waiting for the EAB check. The main specificity of our approach consists in leveraging a crowd-sourced information. In fact, we propose to enrich each connection request with the total number of EAB and RA attempts. Thus, we introduce a lightweight change to the standard to allow the eNodeB to be notified about the congestion level.
The integration of the proposed approach will considerably reduce access costs by efficiently supporting a very massive number of terminals, which will allow to go much farther than the 50 000 terminals per cell expected by the current standard. Indeed, the more accurate the estimate of the number of terminals, the more effective their access control will be.
The remainder of this paper is organized as follows. Section 2 is dedicated to some related works. Section 3 portrays our proposed model of access for multiclass IoT devices and studies its controllability. Section 4 describes the proposed algorithms given to estimate the number of terminals that attempted the access and those wanting to access. Section 5 is dedicated to the simulation setup and the analysis of our proposition. Finally, conclusions are presented in Section 6 with a summary recapping the main advantages and achievements of the proposed access model.

2 RELATED WORKS
In order to support an increasing number of IoT devices, NOs and service providers will have to use different wireless access technologies. A large share of IoT devices will be served by short-range radio technologies operating on unlicensed

BOUZOUITA ET AL.

3 of 16

spectrum (eg, Wi-Fi and Bluetooth). For these networks, several challenges will need to be addressed in order to make these networks viable solutions for IoT support.17 Among these, routing,18 providing the requested Quality-of-Service or Quality-of-Experience support, fault tolerance remains open problems, which has been the subject of several works in the literature.
A significant proportion of IoT devices will still be enabled by wireless Wide Area Networks (WANs). These networks have the advantage of covering large areas at low cost. On the one hand, LPWAN networks, operating in unlicensed frequency bands such as LoRa or Sigfox, which have been dedicated to IoT devices, are being deployed on a large scale and provide connectivity to different types of IoT devices. On the other hand, 3GPP networks, generally operating on licensed frequencies, are already widely available worldwide and can offer a reliable connectivity service at a reasonable cost, through notably NB-IoT.
Massive access of IoT devices through wireless wide access networks, and particularly LPWAN, represents one of the most important challenges that network operators will face. Indeed, the intrinsic limits in radio resources, the RA of IoT terminals, whose number continues to grow, presents a real risk of congestion collapse,19 which calls for the development of flexible and efficient scheduling and RA techniques.20
The fact is, not all LPWAN networks are equal regarding the support of massive IoT devices. Although released much earlier, LoRaWan and Sigfox do not propose a solution to this problem, apart from the limitation of the ‚ÄúTime On Air‚Äù.7 This Time On Air allows reducing the burden at the access but fails in adapting to network conditions' variation. Hence, the optimization of the capacity of LoRaWAN and Sigfox remains an important issue to deal with. On the other hand, RAN overload control was identified very early as a first priority improvement area in 3GPP.11 The European Telecommunications Standards Institute also introduced several solutions to overcome such problems in mobile networks.21 Thus, the newly introduced standards for IoT, such as the NB-IoT, benefit naturally from these advances. Among the concepts introduced, the EAB technique is certainly the one that attacks the problem at its root, since it allows blocking access attempts for IoT terminals.22
To combat the overlapped simultaneous transmissions of multiple devices in a shared radio resource, a nonorthogonal multiple access23,24 strategy is proposed, where multiple devices are allowed to transmit over the same subband and the base station performs successive interference cancelation to decode each device's message. The authors derived the system stability conditions, where the maximum packet arrival rate was found with and without Quality-of-Service guarantee and the obtained results allow to clearly improve the NB-IoT strategy.25
In this paper, we focus on the EAB technique, which can be used in conjunction with the techniques introduced above. Indeed, the EAB proves its efficiency and remains necessary when an access of massive number of IoT devices is required. The idea introduced is rather simple, since it involves calculating a blocking factor. However, a good implementation would require a good knowledge of the number of terminals willing to attempt access to infer the probability of blocking. Unfortunately, this information is not available in the network. Thus, approaches based on an exact knowledge of the system model make it possible to obtain an optimal controller, as the one introduced in our previous work,26 but are generally not operational in practical situations. This explains the proliferation of system model-agnostic approaches.27
Most of existing approaches are based on estimating the number of terminals that attempted access, as they cannot have an accurate knowledge of the system's status. Thus, the number of IoT devices that succeeded at the access, knowing the probability of blocking, makes it possible to have an indicator on the number of terminals that wanted to attempt access. In this paper, we proposed a dynamic adaptive access barring scheme for heavily congested M2M networks.16 The main idea behind this paper is to, first, determine the optimal number of devices that should attempt access and, then, to propose a system model-agnostic controller, which adapts the blocking probability based on the mismatch existing between the calculated and the targeted number of successes (ie, optimal one). The obtained results demonstrated a reduced RA delay in addition to reduced retransmissions, which has a direct impact on the IoT energy consumption. Nevertheless, no traffic differentiation is considered and all IoT devices are treated identically. Using a similar approach for deducing the optimal load, the authors, in previous works,28,29 proposed to rely on the calculation of the steady state probabilities of a Markov chain to deduce an efficient control scheme. A similar method was proposed by Pang et al.30 This method estimates the number of RA attempts and then proposed a scheme for resources' allocation. The proposed solution is applicable in many IoT, as it ensures a high resource efficiency and low RA delay without a prior knowledge of arrival traffic rate. To offer an individual reliability guarantee per device, another proactive approach31 is proposed. It consists of two phases, ie, an estimation phase and a serving phase. In the estimation phase, the number of arrivals is estimated, and then, this information is used to tune the amount of resources allocated in the serving phase.
While efficient and powerful, these techniques fail to avoid a synchronized access for massive M2M devices,19 which may result in some cases to a congestion collapse. On the other hand, only few approaches in the literature proposed

4 of 16

BOUZOUITA ET AL.

to rely on crowd sourcing to estimate the system model state. Without being exhaustive, a crowd sourcing algorithm is proposed to adjust dynamically the backoff times according to congestion level and the traffic's type.32
In this way, we propose, in this paper, to reveal the number of IoT devices willing to connect through crowd sourcing. To the best of our knowledge no one proposed an accurate estimation of such number, especially by class of IoT applications, which emphasizes the originality of our work.

3 A MODEL OF ACCESS FOR MULTICLASS IOT DEVICES

3.1 Model's definition

Our model for IoT devices' RA with multiple EAB factors (ie, one factor per class) is influenced by the single-class system model that we have proposed in our previous work.16
The proposed model is a fluid one: the involved quantities and the whole numbers are seen as real (continuous) quantities. The parameters used are listed as follows:
x1,i(t): number of backlogged devices from class i at time t, where i ‚àà ‚ÑÇ = {1, 2, ‚Ä¶ , K}, K thus being the number of considered classes;
x1,L,i(t): number of blocked devices from class i waiting for a reattempt at time t, after having failed an EAB check; x2(t): total number of devices from the different classes that pass the EAB check and wait to start RA attempt at time t; Ì†µÌºÜi: arrival rate of devices from class i. Different traffic patterns will be considered in the following, depending on the type of IoT applications; Ì†µÌºá1,i: rate of EAB failure for class i, which is equal to 1 ‚àí pi; Ì†µÌºá2,i: rate of EAB reattempts for class i; Ì†µÌºÉ1: rate of RA failure, which is equal to 1 ‚àí qxN2‚àí1 when Ì†µÌºÉ is equal to 0 (see last item); Ì†µÌºÉ2: rate of RA reattempts; Ì†µÌºÉ rate at which the devices abort the transmission after reaching the maximum number of RA attempts; in a correctly dimensioned system, we should have Ì†µÌºÉ = 0; pi: EAB factor for class i.
When attempting the RA, IoT devices contend for the same available preambles. As depicted by the 3GPP standard, the number of preambles N should be smaller or equal to 128 as there is up to two sets of 64 preambles available in a cell.
In each RACH opportunity, these preambles are split into successful (ie, chosen by only one device), collided (ie, chosen by two or more devices), and idle (ie, selected by none of the devices) preambles. In the following, we compute the average values of these quantities that we have determined in another paper.33 These quantities will be used by our algorithms.
Let us define qN = 1 ‚àí 1‚àïN. The average number of successful preambles NS, during the RACH opportunities, is given as follows (this is a classic ‚Äúballs-into-bins‚Äù problem):

NS

=

‚àëK NSi

=

qxN2‚àí1x2,

(1)

i=1

where NSi represents the number of successful preambles chosen from class i. The average number of idle preambles NI is given by the following equation:

NI = NqxN2 .

(2)

From (1) and (2), we obtain the expected number of failed preambles NF

NF = N ‚àí (NS + NI).

(3)

Now, we are ready to describe the evolution of the state variables x1,i(t), x1,L,i(t), x2(t), and x2,L(t), for all i ‚àà ‚ÑÇ, based on the model depicted in Figure 1. The model's dynamics is described by the following system of differential equations: for all i,

‚éß dx1,i ‚é™ dt

= Ì†µÌºÜi ‚àí pix1,i ‚àí Ì†µÌºá1,ix1,i + Ì†µÌºá2,ix1,L,i,

(4)

‚é™ dx1,L,i ‚é™ dt

= Ì†µÌºá1,ix1,i ‚àí Ì†µÌºá2,ix1,L,i,

(5)

‚é® ‚é™

dx2

‚é™ dt

=

‚àëK i=1pix1,i

+

Ì†µÌºÉ2x2,L

‚àí

(Ì†µÌºÉ

+

Ì†µÌºÉ1)x2

‚àí

x2qxN2‚àí1,

(6)

‚é™ dx2,L ‚é© dt

= Ì†µÌºÉ1x2 ‚àí Ì†µÌºÉ2x2,L.

(7)

BOUZOUITA ET AL.

5 of 16

FIGURE 1 System model. Subsystem 1 represents the terminals, belonging to different classes (from 1 to K), that would like to connect; the objects in the state variable x1,i represent those that can try to connect with a probability pi, in the case of a failure they go into the waiting state x1,L,i for a backoff time duration. Subsystem 2 represents the objects coming from the different classes that can try to choose a preamble. In the case of a collision, they may attempt access a number of times. They leave subsystem 2 when they succeed in being the only ones to have chosen a preamble or when they reach the maximum number of attempts (with a rate of Ì†µÌºÉ)
with the constraints given as follows:
‚Ä¢ x1,i, x1,L,i, x2, and x2,L should be nonnegative for all i; ‚Ä¢ Ì†µÌºÜi > 0, Ì†µÌºÉ1 > 0, Ì†µÌºÉ2 > 0, Ì†µÌºá1,i > 0, Ì†µÌºá2,i > 0, and Ì†µÌºÉ ‚â• 0 for all i; ‚Ä¢ 0 ‚â§ pi ‚â§ 1 for all i.

3.2 Steady state analysis
In this section, we direct our focus on the analysis of its steady state performance. For the sake of simplicity, we consider in the following the case where Ì†µÌºÉ is equal to 0. Indeed, in a system working
properly, this assumption should be valid. The study of the steady state of the system comes back to consider that the derivatives expressed in Equations (4)-(7)
are equal to 0

‚éß0 = Ì†µÌºÜi ‚àí pixÃÑ1,i ‚àí (1 ‚àí pi)xÃÑ1,i + Ì†µÌºá2,ixÃÑ1,L,i,

(8)

‚é™‚é™0 ‚é®‚é™0 ‚é™‚é©0

= =

((‚àë1 Ki‚àí=1ppii)xÃÑxÃÑ11,i,i+)‚àíÌ†µÌºÉÌ†µ2Ìºáx2ÃÑ,2ix,ÃÑL1,‚àíL,i(, 1

‚àí

) qxNÃÑ2‚àí1

xÃÑ2

‚àí

xÃÑ 2 qxNÃÑ 2 ‚àí1 ,

= 1 ‚àí qxNÃÑ2‚àí1 xÃÑ2 ‚àí Ì†µÌºÉ2xÃÑ2,L.

(9) (10) (11)

From (8) and (9), we obtain, for all i,

xÃÑ 1,i

=

Ì†µÌºÜi . pi

(12)

6 of 16

BOUZOUITA ET AL.

Replacing the value of xÃÑ1,i in (9), we have

xÃÑ 1,L,i

=

1

‚àí pi pi

Ì†µÌºÜi . Ì†µÌºá2,i

(13)

By adding Equations (10) and (11), we have

‚àíxÃÑ 2 qNxÃÑ 2 ‚àí1

+

‚àëK Ì†µÌºÜi

=

0.

(14)

i=1

Write

Ì†µÌºÜ

=

‚àëK
i=1

Ì†µÌºÜi.

We

have

xÃÑ2qxNÃÑ2‚àí1 = Ì†µÌºÜ.

The numerical solution to this equation in xÃÑ2 can be easily obtained following a fixed-point approach (see next the section),

by iterating the sequence (sn)n ‚â• 0, with s0 = Ì†µÌºÜ and

(

)

sn+1 = sn 1 ‚àí qsNn‚àí1 + Ì†µÌºÜ.

(15)

The convergence is very fast (a few iterations provide a very precise value). We can also note that the solution to (14) can be written in terms of the Lambert W function, defined by W(x)eW(x) = x.34 This function is available in most scientific libraries and numerical analysis tools. We have

xÃÑ2 = W (qN Ì†µÌºÜ).

(16)

Knowing xÃÑ2, the last component of the unique stationary point follows from (11)

xÃÑ2,L

=

1 Ì†µÌºÉ2

(

)

1 ‚àí qNxÃÑ2‚àí1 xÃÑ2.

(17)

Hence, the stationary or equilibrium point of the dynamical system is given by

xÃÑ 1,i

=

Ì†µÌºÜi , pi

xÃÑ 1,L,i

=

1

‚àí pi pi

Ì†µÌºÜi , Ì†µÌºá2,i

xÃÑ2 = W (qN Ì†µÌºÜ),

xÃÑ2,L

=

1 Ì†µÌºÉ2

(

)

1 ‚àí qxNÃÑ2‚àí1 xÃÑ2.

3.3 Optimal number of IoT devices
Having too many contending IoT devices causes irremediably collisions and, therefore, an inefficient access; having too
few devices would result in underutilization of resources. The main idea, in this section, is to derive an optimal number
of contending devices x2, which maximizes the success access probability. All the devices passing successfully the EAB check will contend for the same N radio resources to access the network.
The optimal number of devices x2‚àó, from the different classes, performing an RA at the same time is the number x2 maximizing NS. To compute it, we propose to analyze the nonlinear equation given in (1). We provide here, a short summary following a direct approach, avoiding the classic use of the Lambert function W defined on any complex number z by W(z) = w ‚áê‚áí z = wew as in previous section.34
Let us define function f by means of f (x) = xq x ‚àí 1 for x ‚â• 0, where 0 < q < 1. We have f (0) = f (‚àû) = 0 and Ì†µÌ±ì ‚Ä≤(x) = qx‚àí1(1+x ln q), giving a maximum at x = x‚àó = ‚àí1‚àï ln q, whose value is ‚àí1‚àï(eq ln q). Replacing q by qN = 1 ‚àí N ‚àí1 and x by xÃÑ2, this already gives us the stability condition of the ‚Äúright side‚Äù of the model, that is, concerning the convergence of x2(t) and x2,L(t): Ì†µÌºÜ ‚â§ ‚àí1‚àï(eqN ln qN ) = NS‚àó. If Ì†µÌºÜ < NS‚àó, then we have two solutions to the equation Ì†µÌºÜ = xÃÑ2qxNÃÑ2‚àí1, say, ra and rb, with ra < ‚àí1‚àï ln qN = xÃÑ2‚àó < rb, where ra leads to stability and rb to instability (see Figure 2). Knowing that 0 < ra < xÃÑ2‚àó allows to easily find ra numerically, for instance, using a Newton scheme35 or using a fixed-point method as in previous section. Let us provide a bit more details here. We defined the sequence (sn)n ‚â• 0 by s0 = Ì†µÌºÜ and sn+1 = Ì†µÌºÜ‚àïqsNn‚àí1. Write

BOUZOUITA ET AL.

7 of 16

FIGURE 2 Successful random access (RA) vs number of contending devices.The analysis of the function f (x) = xqx ‚àí 1, for x ‚â• 0, where
0 < q < 1, shows that it has an optimum NS‚àó corresponding to x2‚àó = ‚àí1‚àï ln qN number of devices. Apart from this optimum, it corresponds to a particular number of successful RA two possible solutions (ra, rb). IoT, Internet of Things

back q instead of qN to simplify the presentation. We can first check by induction that this sequence is increasing. At the beginning of the sequence, s1 > Ì†µÌºÜ = s0 because qy < 1 for all y > 0. Then, assuming that s0 < s1 < ¬∑ ¬∑ ¬∑ < sn, we must

prove that sn < sn + 1, that is,

Ì†µÌºÜ qsn‚àí1 ‚àí1

<

Ì†µÌºÜ qsn‚àí1

‚áê‚áí qsn‚àí1

< qsn‚àí1‚àí1,

which is true because function x ÓÇ∂‚Üí qx ‚àí 1 is decreasing and sn ‚àí 1 < sn. Thus, (sn)n ‚â• 0 is strictly increasing. Then, we can check that the sequence is upper bounded, for instance, by x‚àó. First, for s0,

s0

=

Ì†µÌºÜ

<

Ì†µÌºÜ qx‚àó‚àí1

,

and since x‚àóqx‚àó‚àí1 = x‚àó‚àï(e q), then qx‚àó‚àí1 = 1‚àï(e q), and we have

Then, assuming that sn < x‚àó, we have

s0

<

Ì†µÌºÜ qx‚àó‚àí1

=

e qÌ†µÌºÜ

<

x‚àó.

sn+1

=

Ì†µÌºÜ qsn‚àí1

<

Ì†µÌºÜ qx‚àó‚àí1

.

Now, we conclude as we did for s0. This proves that, when n ‚Üí ‚àû, sn‚Üëra, and as we stated before, the convergence is very fast.
Concerning the ‚Äúleft‚Äù part of the model (that is, the variables indexed by 1), the stationary point is always stable. This can be checked by any standard technique. Intuitively, the dynamics is similar as that of x in the ordinary differential equation x‚Ä≤ = a ‚àí bx, with a, b > 0: for any x(0), a, b, we have x ‚Üí a‚àïb and the equilibrium is stable. One can even solve explicitly that part of the differential system (for instance, using Maple or Mathematica) and observe that the solutions are continuous in the initial conditions.
In the following, we denote by xÃÑ2‚àó the value that maximizes the number of successful preambles' transmissions, that is, xÃÑ2‚àó = ‚àí1‚àï ln qN . Figure 2 shows the evolution of function f.

3.4 Controller synthesis
Having described the system's dynamics, let us now study its controllability. It can be clearly noted that the system, described in Equations (4)-(7), is not controllable as a whole, as there is no
means to act on the arrivals and, thus, on the number of the devices in the states x1,i(t) and x1,L,i(t), for all i.

8 of 16

BOUZOUITA ET AL.

In the following, we then propose to study the partial controllability36 of the system. We consider the subsystem repre-
sented by Equations (6) and (7), which corresponds to subsystem 2, as indicated in Figure 1. For the sake of simplification, w‚àëeKi=a1 pxp1,liy=thx1e. same EAB factor P or Peab for the different classes, ie, pi = P for all i ‚àà ‚ÑÇ. Let us, also, assume that
For this subsystem's dynamics, we can write, in its state space,

dX = A(X)X + B(X)P,

(18)

dt

where

[ ] []

X=

x2 x2,L

,B =

x1 0

and

[ A = ‚àí(Ì†µÌºÉ + Ì†µÌºÉ1) ‚àí qxN2‚àí1 ln(qN )x2 ‚àí qxN2‚àí1
Ì†µÌºÉ1

] Ì†µÌºÉ2 . ‚àíÌ†µÌºÉ2

Matrices A and B are respectively the system matrix and the control matrix. Matrix A relates to how the current state affects the state change. However, matrix B determines how the system i[nput af]fects the state change. It can be easily verified that the subsystem described above is controllable (as the rank of B AB = 2). Consequently, the whole system is partially controllable in its state variables x2 and x2,L. If these states are observable, one can deduce that a feedback controller can be designed to make the variables, and in particular x2(t), converge to the optimal value, as defined in Section 3.3.
The subsystem described in Equations (6)-(7) is nonlinear. Instead of proposing a nonlinear control technique, as we did in a previous work,26 we propose, in what follows, the use of simple Proportional Integral Derivative (PID) controller,37 as we are focusing on the estimation of the state variables, in this paper, and not on its control.
Instead of using a continuous PID controller, as suggested by the model, we opted to use a discrete version. Indeed, the real system that we control works in discrete time (ie, frame-by-frame processing), and since the PID controller is agnostic of the model, it is more appropriate to use a discrete version.
The discrete PID regulator can be described by the following equation:

‚àën

Peab(n) = Kpe(n) + Ki e(k) + Kd(e(n) ‚àí e(n ‚àí 1)),

(19)

k=0

where n, Peab, e, Kp, Ki, and Kd represent respectively the instant, the controller output, the difference between the measured value, which will be described in the following section, and the targeted value (ie, optimal value obtained in
Section 3.3), the proportional gain, the integral gain, and the derivative gain.
The main objective behind the PID controller is to make the total number of IoT devices attempting the access (ie, x2) converge to the optimal one x2‚àó. The analysis of the impact of the controller on the estimation accuracy will be analyzed in the performance evaluation section.

4 FINE-GRAINED ESTIMATION OF THE NUMBER OF IOT DEVICES
Optimizing network resources' usage necessarily requires the convergence of the number of devices attempting the access to the optimal number determined in the previous section. To reach such objective, one need to be able to effectively block the devices before they even attempt access. Barring them certainly implies to know the number of terminals wanting to access the network, those that are in the states variables x1 or x1,L. However, the devices in these states are not connected yet and thus invisible from the network's perspective.
We propose, in this paper, to estimate the number of IoTs, in state x1, indirectly via the number of terminals, and in state x2, which successfully access the network. Specifically, we propose, from the number of successes, to estimate the

BOUZOUITA ET AL.

9 of 16

terminals that attempted the access. This estimate will then be used to refine the estimate of the number of terminals wanting to access.

4.1 Estimation of the number of contending devices (x2)
Several methods in the literature proposed estimating the number of terminals that attempted the access, as introduced in the state-of-the-art section. The originality of our approach lies in the use of the ‚Äúballs-into-bins‚Äù model, which perfectly represents the access process. Thus, based on the model, defined in Section 3.1, we can certainly infer a first estimator of the number of devices attempting the access (ie, the number of terminals in state variable x2). Indeed, the number of devices succeeding in the access (NS), the number of unused preambles (NI), and the number of collided preambles (NF) can give an idea of the number x2.

In order to avoid very large oscillations in the measurement of the parameters NS, NI, and NF, we propose in the following to consider one measurement per second, which corresponds to 100 frames. This ensures that the measures reflect reality and are therefore not the result of a completely random phenomenon.
Since a successful preamble concerns only one device and a collided preamble will concern at least two devices, a minimal number of devices x2,min can be determined by NS[n] + 2NF[n] (see line 5). This number represents a lower bound, which could be improved using the proposed model.
From Equations (1) and (2), one can deduce x2 knowing the other values, which can be measured by the access point. Since Equation (1) presents two solutions, it is preferable to estimate this number from Equation (2). Indeed, the solution of Equation (2) is equal to ln(NI‚àïN)‚àï ln(qN), which is solvable only when we have the number of NI different from 0 (see line 10).
When there is no more preamble available (NI = 0), reflecting a large number of IoT objects that attempted access, it is possible to measure the extent of congestion by looking at the number of terminals that have successfully accessed. It is in this sense that we consider only the stable solution of Equation (1) (see Algorithm 1 for more details). The estimation of the number of contending devices xÃÇ2 is, then, corrected using the factor expressed in line 16. The correction consists in considering the average (Exponential Weight Moving Average) values instead of the instantaneous one.
Note that the absence of unused preambles and the absence of successful IoT devices may lead to an underestimation of the number of terminals within the state variable x2. Indeed, in this case, there is no way to really estimate the extent of the congestion. Therefore, it is necessary to couple this estimate with a relatively effective controller.

10 of 16

BOUZOUITA ET AL.

The estimation of the number of devices per class can, then, be obtained in line 17. We just assumed here that the proportion of successes for each class corresponds to the proportion of devices attempting the access.

4.2 Crowd-based estimation of the number of IoT devices wanting the access (x1)
To the best of our knowledge, the estimate of the number of equipment wanting to connect has not been addressed in the literature. The difficulty of this estimation is the absence of direct parameters to estimate such number. However, the blocking effects (ie, barring factor) combined with the number of successful accesses certainly give an indication, more or less precise, of the number of IoT devices that have attempted the access. In fact, when the blocking factor in not too big (for very small values of Peab), the number of devices wanting to connect can be directly derived from the number of devices that just accessed the x2 state, since it represents a known fraction Peab of the total number of devices wanting to access.

The number of devices that just reached the state variable x2 can be approximated by the difference between the number of estimated devices xÃÇ2[n] and the IoT devices that was already there, which might be represented by the difference between the last estimate value xÃÇ2[n‚àí1] and those that succeeded in the access (NS[n ‚àí 1]) (see line 9 of Algorithm 2). The number of devices wanting to connect for each class can be deduced in a similar way (see line 11). Note that we are not considering here the number of devices aborting the transmission as a good system should completely avoid such case.
When the barring factor is too big (the access probability too small), the estimation of the number of devices cannot be estimated using the methodology explained above. Therefore, we propose using crowd sourcing to estimate such number.

BOUZOUITA ET AL.

TABLE 1 Basic simulation parameters

Parameter

Value

Simulation duration Number of preambles N x2‚àó Backoff parameter ac-BarringTime

30 s 54 54 20 ms 4s

11 of 16

In fact, as there is no direct or indirect ways to estimate such number, we propose to overload the number of connections and accesses attempts in the connection request message sent by each IoT device. In this way, the reception of the connection requests' messages by the eNodeB becomes very informative since it allows to know the average number of attempts at each step and, thus, the congestion level of the network.
We start by defining an ideal realistic target for the average number of attempts Ne‚àóab, which should be more than one and smaller than three to have reasonable number of attempts. We, then, defined two thresholds: a minimum threshold Nmin and the maximal threshold Nmax around, which the average should oscillate. An average number of attempts bigger than Nmax means an underestimation of the congestion level and requires, then, an adjustment upwards of the number of devices by adding to it a small quantity Ì†µÌªΩxÃÇ1[n]. On the other hand, an average number small than Nmin means an overestimation of the congestion level, which requires the adjustment of the number of devices downwards. The same technique was used to estimate the number of devices of the different classes.
In the current standard, the number of connections and accesses attempts may be overloaded into the ‚ÄúRadio Resource Control connection request‚Äù, which is sent just after a successful preamble transmission (ie, reception of the ‚ÄúRA response‚Äù from the eNodeB) through the CCCH logical channel.38 To be compliant with the actual version of the standard, 8 bits could be taken from the 40 bits ‚ÄúrandomValue‚Äù field of the request. Three bits could be reserved for each number (this gives the possibility to record up to 7 access attempts, which is more than enough for a stable system) and 2 bits (set to 0) to indicate that the last 6 bits will be used to store such numbers.

5 PERFORMANCES EVALUATION
In order to evaluate the accuracy of the estimations, we built from scratch a discrete events' simulator in C representing the access of multiclass IoT devices in a Telco network. Table 1 summarizes the parameters used under this simulator.
We assume that there is one access point and that IoT devices are activated according to a Poisson traffic model where interarrivals are exponentially distributed. We considered two classes of service: the first class refers to emergency and prioritized applications and the second class refers to non‚Äìprioritized applications (eg, smart metering applications) that are delay tolerant. We also adopt a RACH configuration where one RACH opportunity occurs every 10 ms with 54 preambles at each opportunity. When a RACH trial is declared unsuccessful, a device can retry the RA after a backoff time chosen uniformly between 0 and the backoff parameter fixed in Table 1. As described in the standard, a limited number of attempts (10 attempts) is considered here before aborting the transmission. Note that there is no dropout in the first phase and that the number of attempts is therefore unlimited. On the other hand, any failure in the EAB check blocks the device from a new trial during an ac-BarringTime.
In the following, we performed a series of experiments. In the first experiment, we evaluated the estimation accuracy of the number of contending devices as a function of the time. In the second set of experiments, we analyzed the accuracy of the estimation for various loads. The obtained average values and the confidence intervals were computed for 30 experiments for each network's load value. In the third set of experiments, we test the impact of our proposed controller on the estimation's method.
Note that the error bars (in Sections 5.2 and 5.3) are obtained for 95% confidence intervals.

5.1 Estimation efficiency
Figure 3 and Figure 4 show respectively the existing gap between the real number x1 and the estimated one xÃÇ1 and between the real value x2 and the estimated one xÃÇ2. It can be seen that only very small fluctuations exist between x1 and xÃÇ1 and between x2 and xÃÇ2, which proves the accuracy of our estimation.

12 of 16
FIGURE 3 Evolution of x1 and xÃÇ1 as a function of time

BOUZOUITA ET AL.

FIGURE 4 Evolution of x2 and xÃÇ2 as a function of time

FIGURE 5 Evolution of xÃÇ1, xÃÇ1,1, and xÃÇ1,2 as a function of time
Figure 5 depicts the evolution of the estimated xÃÇ1 regarding the sum of the estimated xÃÇ1,i, ‚àÄi ‚àà ‚ÑÇ. We can easily remark that xÃÇ1 is nearly the same as the sum of xÃÇ1,i estimated separately per class. This is one of the major strength of our crowd-based estimation's method.
Similarly, as shown in Figure 6, the estimated xÃÇ2, corresponds to the sum of xÃÇ2,i estimated separately per class. This is a direct consequence of our assumption that the proportion of successes for each class corresponds to the proportion of devices attempting the access.
5.2 Estimation accuracy for various loads
Figure 7 depicts the evolution of the estimation error of x1, x1,1, and x1,2 for various loads. It can be clearly seen that, when the network's load increases, the average estimation error (of x1, x1,1, and x1,2) increases. More specifically, a remarkable increase (‚âÉ 13%) is noted when Ì†µÌºÜ = 20, and then, we obtain a more accurate estimation (‚âÉ 5%). In fact, when the

BOUZOUITA ET AL.
FIGURE 6 Evolution of xÃÇ2, xÃÇ2,1, and xÃÇ2,2 as a function of time FIGURE 7 Evolution of the estimation error of x1 vs Ì†µÌºÜ

13 of 16

FIGURE 8 Evolution of the estimation error of x2 vs Ì†µÌºÜ
network is more congested, x1 (and respectively x1,1 and x1,2) tends to reach stable values, and then, the estimation's error is reduced. We also observe that the estimation error of x1,1 is very slightly higher than that of x1 and x1,2, because of the reduced arrival rate of such emergency applications. Indeed, when arrivals are infrequent, there are less observed data, the confidence level is reduced, and then, the estimation's error is increased.
Figure 8 shows the evolution of the estimation error of x2, x2,1, and x2,2 for various loads. We can easily remark that, when the network's load increases, the average estimation error (of x2, x2,1, and x2,2) increases slightly, but does not exceed 8%. Besides, the estimation error of x2,1 is slightly higher than that of x2 and x2,2, because of the infrequent arrivals of such class. The same explanation as above justifies this behavior.
5.3 Impact of the controller on the estimation accuracy
To show the impact of using the proposed PID adaptation controller on our estimation's method, we compare, in the following, its behavior with simple approaches using fixed EAB probabilities.

14 of 16
FIGURE 9 Evolution of the estimation error of x2 vs Ì†µÌºÜ

BOUZOUITA ET AL.

FIGURE 10 Evolution of the estimation error of x1 vs Ì†µÌºÜ
FIGURE 11 NI vs Ì†µÌºÜ
Figures 9 and 10 show respectively the evolution of the estimation error of x2 and x1 for various loads. We can easily check the rapid degradation of the estimation's accuracy of x2 (‚âÉ 70% of estimation's error) and x1 (‚âÉ 100% of estimation's error) when a fixed EAB approach is applied and when the network's load increases. Only 5% of estimation's error is measured when an adaptive approach is used, independently from the network's load. To justify such behavior, we show respectively in Figures 11 and 12 the evolution of the number of Idle preambles NI and successful preambles NS for various loads.
We can clearly remark that, when the network is undergoing a severe congestion (ie, our system is no more stable) and if a simple EAB approach is adopted, NI is nearly equal to zero (ie, resources' overutilization) and NS decreases gradually and becomes intolerable. However, when an adaptive PID controller is applied, NI and NS are slightly reduced but tend to reach stable values and then a more stable system, even if the network's load increases. In such a case, our estimation's method remains efficient. Nonetheless, this efficiency is deteriorated when a fixed EAB approach is used. Hence, the efficiency of our estimation's solution is closely related to the action of the controller in insuring the stability of the system.

BOUZOUITA ET AL.

15 of 16

FIGURE 12 NS vs Ì†µÌºÜ
6 CONCLUSION
One of the key challenges associated with the growth of connected IoT devices in 5G networks is to deal with the congestion collapse issue, particularly when a massive amount of simultaneous IoT arrivals occurs. To limit such a burden, many current solutions consider using barring probabilities at the access to reduce the amount of incoming devices. Nonetheless, the efficiency of such techniques remains closely related to an accurate knowledge of the number of contending IoT devices. Hence, a better estimation of the number of devices willing to connect, would efficiently help to overcome the risk of congestion.
Based on a model of access for multiclass IoT devices, we have, in this paper, proposed to enrich the connection requests with the number of access attempts to make the base station aware of the congestion's status. Using such information, we propose a novel crowd sourcing recursive algorithm to estimate the number of devices.
The obtained results demonstrated the efficiency of our proposition as we obtained estimated values very near to the real ones. We also investigated the trade-off existing between the estimation's accuracy and the use of an efficient controller. Indeed, the efficiency of the proposed method of estimation requires a stable system, and thus an efficient controller should be activated.
ORCID
Yassine Hadjadj-Aoul http://orcid.org/0000-0003-4864-4609
REFERENCES
1. Lin G-Y, Wei H-Y. Flexible 5G M2M network access with cognitive RAN: survey and design principles. Paper presented at: IEEE Conference on Standards for Communications and Networking (CSCN); 2015; Tokyo, Japan.
2. Bontu CS, Periyalwar S, Pecen M. Wireless wide-area networks for internet of things: an air interface protocol for IoT and a simultaneous access channel for uplink IoT communication. IEEE Veh Technol Mag. 2014;9:54-63.
3. Lien S-Y, Chen K-C, Lin Y. Toward ubiquitous massive accesses in 3GPP machine-to-machine communications. IEEE Commun Mag. 2011;49:66-74.
4. Abbas Z, Yoon W. A survey on energy conserving mechanisms for the internet of things: wireless networking aspects. Sensors. 2015;15:24818-24847.
5. Raza U, Kulkarni P, Sooriyabandara M. Low power wide area networks: an overview. IEEE Commun Surv Tutor. 2017;19(2):855-873. 6. Lauridsen M, Nguyen HC, Vejlgaard B, Kov√°cs IZ, Mogensen P, Sorensen M. Coverage comparison of GPRS, NB-IoT, LoRa, and SigFox
in a 7800 km2 area. Paper presented at: IEEE 85th Vehicular Technology Conference (VTC Spring); 2017; Sydney, Australia. 7. Adelantado F, Vilajosana X, Tuset-Peiro P, Martinez B, Melia-Segui J, Watteyne T. Understanding the limits of LoRaWAN. IEEE Commun
Mag. 2017;55:34-40. 8. Boisguene R, Tseng S-C, Huang C-W, Lin P. A survey on NB-IoT downlink scheduling: issues and potential solutions. Paper presented at:
13th International Wireless Communications and Mobile Computing Conference (IWCMC); 2017; Valencia, Spain. 9. Chen J, Hu K, Wang Q, Sun Y, Shi Z, He S. Narrowband internet of things: implementations and applications. IEEE Internet Things J.
2017;4(6):2309-2314. 10. Beyene YD, Jantti R, Tirkkonen O, et al. NB-IoT technology overview and experience from cloud-RAN implementation. IEEE Wirel
Commun. 2017;24(3):26-32. 11. 3GPP. Study on RAN improvements for machine-type communications. 2013. TR 37.868 V11.0.0.

16 of 16

BOUZOUITA ET AL.

12. 3GPP. Technical specification group radio access network; evolved universal terrestrial radio access network (E-UTRAN); S1 general aspects and principles. 3GPP TS 36.410 version 11.1.0 Release 11.
13. Ksentini A, Hadjadj-Aoul Y, Taleb T. Cellular-based machine-to-machine: overload control. IEEE Netw. 2012;26(6):54-60.
14. Arouk O, Ksentini A, Taleb T. Group paging-based energy saving for massive MTC accesses in LTE and beyond networks. IEEE J Sel Areas Commun. 2016;34:1086-1102.
15. Wang Z, Wong VWS. Optimal access class barring for stationary machine type communication devices with timing advance information. IEEE Trans Wirel Commun. 2015;14(10):5374-5387.
16. Bouzouita M, Hadjadj-Aoul Y, Zangar N, Rubino G, Tabbane S. Dynamic adaptive access barring scheme for heavily congested M2M networks. In: Proceedings of the 19th ACM International Conference on Modeling, Analysis and Simulation of Wireless and Mobile Systems; 2016; Malta, Malta.
17. Hasan MZ, Al-Rizzo H, Al-Turjman F. A survey on multipath routing protocols for QoS assurances in real-time multimedia wireless sensor networks. IEEE Commun Surv Tutor. 2017;19:1424-1456.
18. Al-Turjman F. Cognitive routing protocol for disaster-inspired internet of things. Futur Gener Comput Syst. 2017.
19. Bouzouita M, Hadjadj-Aoul Y, Zangar N, Tabbane S. On the risk of congestion collapse in heavily congested M2M networks. Paper presented at: International Symposium on Networks, Computers and Communications; 2016; Hammamet, Tunisia.
20. Hussain F, Anpalagan A, Vannithamby R. Medium access control techniques in M2M communication: survey and critical review. Trans Emerg Telecommun Technol. 2014;28:e2869.
21. 3GPP. Digital cellular telecommunications system (Phase 2+); universal mobile telecommunications system (UMTS); LTE; service accessibility. 2013. 3GPP TS 22.011 version 11.3.0 Release 11.
22. 3GPP. Evolved universal terrestrial radio access (E-UTRA); radio resource control (RRC); protocol specification. 2015. 3GPP TS 36.331 version 12.5.0 Release 10.
23. Shirvanimoghaddam M, Dohler M, Johnson SJ. Massive non-orthogonal multiple access for cellular IoT: potentials and limitations. IEEE Commun Mag. 2017;55:55-61.
24. Li A, Lan Y, Chen X, Jiang H. Non-orthogonal multiple access (NOMA) for future downlink radio access of 5G. China Commun. 2015;12:28-37.
25. Shirvanimoghaddam M, Condoluci M, Dohler M, Johnson SJ. On the fundamental limits of random non-orthogonal multiple access in cellular massive IoT. IEEE J Sel Areas Commun. 2017;35:2238-2252.
26. Bouzouita M, Hadjadj-Aoul Y, Zangar N, Rubino G, Tabbane S. Applying nonlinear optimal control strategy for the access management of MTC devices. Paper presented at: 13th IEEE Annual Consumer Communications & Networking Conference (CCNC); 2016; Las Vegas, NV.
27. Ksentini A, Hadjadj-Aoul Y, Taleb T. Cellular-based machine-to-machine: overload control. IEEE Netw. 2012;26(6):54-60.
28. He H, Du Q, Song H, Li W, Wang Y, Ren P. Traffic-aware ACB scheme for massive access in machine-to-machine networks; 2015; Paper presented at: IEEE International Conference on Communications; 2015; London, UK.
29. He H, Ren P, Du Q, Sun L, Wang Y. Traffic-aware overload control scheme in 5G ultra-dense M2M networks. Trans Emerg Telecommun Technol. 2017;28(9):e3146.
30. Pang Y-C, Lin G-Y, Wei H-Y. Context-aware dynamic resource allocation for cellular M2M communications. IEEE Internet things J. 2015;3:318-326.
31. Madueno GC, Pratas NK, Stefanovic¬¥ CÀá , Popovski P. Massive M2M access with reliability guarantees in LTE systems. Paper presented at: IEEE International Conference on Communications; 2015; London, UK.
32. Bouzouita M, Hadjadj-Aoul Y, Zangar N, Tabbane S. Leveraging crowd sourcing technique for an optimized M2M access during emergency situations. Paper presented at: International Conference on Information and Communication Technologies for Disaster Management; 2016; Vienna, Austria.
33. Bouzouita M, Hadjadj-Aoul Y, Zangar N, Rubino G, Tabbane S. Multiple access class barring factors algorithm for M2M communications in LTE-advanced networks. In: Proceedings of the 18th ACM International Conference on Modeling, Analysis and Simulation of Wireless and Mobile Systems; 2015; Cancun, Mexico.
34. Corless RM, Gonnet GH, Hare DEG, Jeffrey DJ, Knuth DE. On the Lambert W function. Adv Comput Math. 1996;5(1):329-359. 35. Wikipedia. Newton's method. https://en.wikipedia.org/wiki/Newton‚Ä≤s_method
36. Bashirov AE, Mahmudov N, Semi N, Etikan H. Partial controllability concepts. Int J Control. 2007;80(1):1-7.
37. √Östr√∂m KJ, H√§gglund T. Advanced PID control. 2006. ISA-The Instrumentation Systems and Automation Society.
38. 3GPP. Evolved universal terrestrial radio access (E-UTRA); radio resource control (RRC); protocol specification. 2017. 3GPP TS 36.331 version 14.2.2 Release 14.

How to cite this article: Bouzouita M, Hadjadj-Aoul Y, Zangar N, Rubino G. Estimating the number of contending IoT devices in 5G networks: Revealing the invisible. Trans Emerging Tel Tech. 2018;e3513. https://doi.org/10.1002/ett.3513

