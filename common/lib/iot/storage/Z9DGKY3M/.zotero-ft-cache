√† l‚ÄôUniversit√© Pierre et Marie Curie, le 28 septembre 2004
M2 Informatique R√©seaux
Multim√©dia et Qualit√© de Service Cours 1 : RTP
Timur FRIEDMAN
1

A propos du module
I Cinq cour s
I RTP I mult icast I TCP Fr iendly I signalisat ion I I nt Ser v, Dif f Ser v, MPLS, et RSVP
2

Evaluation
I Not e
I 60 % √©cr it I 40 % cont r √¥le cont inu
I Ecr it
I examen (document s non aut or is√©s)
I Cont r √¥le cont inu
I quest ions en cour s : 10 % I TDs : 30 % I papier s, nor mes ‚Äì discussion : 30 % I cont r ibut ion au wiki : 30 %
3

Pour la semaine prochaine
I pr √©par er les exer cices du TD
I sur le sit e www-r p.lip6.f r / ~f r iedman √† par t ir de demain
I lir e le papier
I Timer Reconsider at ion f or Enhanced RTP Scalabilit y
I par J onat han Rosenber g Henning Schulzr inne I Pr oc. I nf ocom 1998
I lir e le RFC 3550 I visit er le Wiki
I disponible √† par t ir de demain
I pr √©par er le pr ochain cour s sur le mult icast
4

Survol du module
I Bas√© sur des connaissances r √©seau I en par t iculier : int er net I Revisit er les couches OSI suivant es : I Applicat ion I Tr anspor t I R√©seau I Les voir sous l‚Äôopt ique du mult im√©dia
5

Motivation

I I nt er net : pas con√ßu pour mult im√©dia

I

un r √©seau pour t ext e, donn√©es

I Depuis ‚Ä¶

I

Web :images

I

lect ur e en t r ansit (st r eaming)

audio et vid√©o

I

j eux int er act if s

I

voix sur I P (VoI P) : voix en t emps r √©elle

I

visioconf √©r ence

6

Probl√©matique

I I nt er net : un r √©seau dit de ¬´ moindr e ef f or t ¬ª (best ef f or t )

I

d√©lais

I

per t es

I

d√©s√©quencement

I

duplicat as

I Applicat ions mult im√©dia : besoin de gar ant ies

I

e.g. VoI P avec t r op de d√©lai ne f onct ionne pas

I Est -ce qu‚Äôun seul r √©seau peut t out f our nir ?

7

Couche application

I Le signalisat ion

I

RTSP, SDP, H.323, SI P

8

Couche transport

I Conf r ont er le congest ion dans le r √©seau

I l‚Äôappr oche TCP-Amical (TCP-Fr iendly)

I

DCCP/ TFRC

I l‚Äôappr oche Qualit √© de ser vice (QoS)

I

I nt Ser v, Dif f Ser v, RSVP, MPLS

I

(sur plusieur s couches, mais on en par le ici)

I Four nir les f onct ionnalit √©s t emps r √©elle I RTP/ RTCP

9

Couche r√©seau
I Dif f usion √† gr ande √©chelle : le mult icast I I GMP (pr ot ocole de bor dur e) I DVMRP et PI M (pr ot ocoles de r out age) I RMT (couche t r anspor t )
I
10

Plan du cours
I Introduction I Communication en temps r√©el I RTP I Limitation de d√©bit RTCP I RTP et le temps r√©el
11

Introduction
I RTP est un protocole de transport dans l‚ÄôInternet
I Dans la couche 4, comme TCP, mais impl√©ment√© sur UDP I RFCs 3550 et 3551 (juillet 2003 ‚Äì RFCs originaux de 1996)
I RTP est pour les applications ¬´ temps r√©el ¬ª
I Par exemple la t√©l√©phonie, le visioconf√©rence I TCP n‚Äôest pas adapt√© pour ces applications
I RTP est con√ßu pour la communication multipoint
I RTP marche sur le multicast
I RTP fournit un cadre aux applications
I Il laisse beaucoup de fonctionnalit√© aux applications I Il fournit les outils n√©cessaires (e.g. estampilles temporelles)
12

Plan
I Introduction I Communication en temps r√©el
I Applications I Caract√©ristiques I Besoins
I RTP I Limitation de d√©bit RTCP I RTP et le temps r√©el
13

Communications en temps r√©el
I Avertissement : une certaine id√©e du temps r√©el
I Orient√©e audio et vid√©o interactive I Pas le temps r√©el dans le sens technique
I Pas ¬´ syst√®mes durs temps r√©el ¬ª
I Mieux compris en fonction d‚Äôexemples...
14

Applications typiques
I Voix sur IP (¬´ VoIP ¬ª)
I T√©l√©phonie
I Visioconf√©rence
I Voix I Vid√©o I Transparents
I Jeux interactives
I Mises √† jour de mouvement I Communication entre participants
15

Applications moins typiques
I Diffusion d‚Äôactualit√©s
I Donn√©es (par exemple √† propos de la bourse)
I Moniteur √† distance
I Collection de donn√©es
I Control t√©l√©m√©trique
I Donn√©es I Commandes
I RTP √† √©t√© con√ßu plut√¥t pour audio et vid√©o
I (Mais pas exclusivement)
16

Caract√©ristiques
I Interactivit√©
I Exemple : t√©l√©phonie I Communication dans deux sens
I Exemple moins typique : vid√©o sur demande I Seulement marche/arr√™t, reculer, avancer, recherche
I Intol√©rance pour les d√©lais
I Exemple : vid√©o I Une trame arrive > 500 ms en retard I Mieux jeter que d‚Äôutiliser
17

Caract√©ristiques bis
I Tol√©rance pour les pertes
I Exemple : voix en paquets G.711 (sans redondance) I Perte de 1 % de trames n√©gligeable en termes de qualit√©
I Exemple : vid√©o cod√© en MPEG I Perte de trames B est permis I Au moins que les trames I et P arrivent
I Exemple moins typique : donn√©es de la bourse
I Communications multipoint
I Exemple : visioconf√©rence I Communications bidirectionnels sont un cas particulier
18

Besoins
I Horodatage des donn√©es I Synchronisation des flux I R√©sistance contre les pertes, duplicatas, mauvais ordre I Identification de participants I Surveillance de l‚Äô√©tat de la connexion I Contr√¥le de flux I Contr√¥le de congestion I Besoins avanc√©s :
I Support pour le transcodage de donn√©es I S√©curit√© de donn√©es
19

Horodatage des donn√©es
I l‚ÄôInternet est un r√©seau ¬´ moindre effort ¬ª
I Pas de garanties de d√©lai I A la diff√©rence avec X.25, par exemple
I X.25 garde les intervalles d‚Äôorigine
I Contraintes temporelles pour la lecture
I Chaque trame audio ou vid√©o doit √™tre lu √† un moment pr√©cis I On jette les trames qui arrivent en retard
I Technique : mise en m√©moire
I Avec l‚Äôhorodatage on r√©cup√®re les intervalles d‚Äôorigine
20

Horodatage exemple
Ila norme G.729 : trames de voix √† 62,5 Hz

Iespacement r√©gulier Iespacement irr√©gulier m√©moire Iespacement r√©gulier

rr√©√©sseeaauu
21

Synchronisation des flux
I Une applications peut avoir plusieurs flux
I Audio I Vid√©o I Transparents
I La lecture des flux doit √™tre synchronis√©e
I Si, par exemple, la voix n‚Äôest pas cod√©e dans le vid√©o
I Besoin d‚Äô√©tablir l‚Äô√©quivalence entre :
I L‚Äôhorodatage de chaque flux I (Il peut √™tre artificiellement r√©gulier)
I Le ¬´ temps de l‚Äôhorloge murale ¬ª
22

Synchronisation exemple d‚Äôapr√®s H. Schulzrinne

estampilles temporelles audio : 160 320 480 640 800
460
estampilles temporelles vid√©o : ... 0
1900
temps de l‚Äôhorloge murale : 8:45:17.23

960 1120 ... 9000
23

R√©sistance contre les pertes, etc.
I L‚ÄôInternet est un r√©seau ¬´ moindre effort ¬ª, donc :
I Pertes des paquets I Duplicatas des paquets I Paquets qui arrivent dans le mauvais ordre
I Pour faire face aux pertes : la redondance
I L‚Äô√©metteur doit conna√Ætre le taux de pertes I Plus il y a de pertes, plus on ajoute de la redondance
I Pour faire face aux duplicatas, mauvais ordre :
I Num√©ros de s√©quence
I Retransmissions ?
I Pas syst√©matiquement (probl√®me de d√©lais)
24

Identification des participants
I Communications multipoint : plusieurs participants
I Identification aux autres participants I D√©multiplexage des flux
I Destin√©s vers le m√™me adresse, m√™me num√©ro de port
I Moyens d‚Äôidentification
I Nom : M Dupont I Adresse courriel : m.dupont@online.fr I Nom logique de machine : dhcp-51.online.fr I Adresse IP / num√©ro de port : 135.227.61.57/24882 I Autres ?
25

Surveillance de l‚Äô√©tat de la connexion
I Param√®tres g√©n√©riques :
I Le taux de pertes I La gigue (variance des d√©lais)
I La connaissance de ces param√®tres aide :
I Les applications adaptatives I Ajouter de la redondance en fonction des pertes I Augmenter la mise en m√©moire en fonction de la gigue
I L‚Äôadministrateur du r√©seau I Reconnaissance des failles
26

Contr√¥le de flux
I Chaque r√©cepteur peut avoir plusieurs m√©moires :
I Pour l‚Äôaudio I Pour le vid√©o
I Dans les communications multipoints :
I Le nombre peut √™tre multipli√© par le nombre d‚Äô√©metteurs
I Comment signaler la m√©moire disponible ?
I Dans le TCP : fen√™tre avertie I Dans le multi flux, multipoint c‚Äôest plus compliqu√©
27

Contr√¥le de congestion
I Le contr√¥le de congestion dans l‚ÄôInternet :
I TCP I Un contr√¥le de bout en bout
I Probl√®mes avec le TCP pour le temps r√©el :
I TCP est monolithique : I Contr√¥le de congestion I Fiabilit√© par retransmissions
I TCP existe exclusivement en version unicast
I Si on veut se dispenser de TCP
I Il est conseill√© d‚Äô√™tre amicale avec TCP (¬´ TCP-friendly ¬ª) I On doit conna√Ætre les d√©lais et les taux de pertes
28

Transcodage
I Des situations difficiles :
I Un r√©cepteur derri√®re un lien √† d√©bit faible I Un r√©cepteur qui ne peut pas d√©coder un format donn√© I Un r√©cepteur derri√®re un pare-feux
I On peut transcoder l‚Äôaudio, le vid√©o :
I √âliminer le st√©r√©o, diminuer la qualit√© I Rendre les images plus petites I Changer de formats
I On peut combiner les flux I On peut changer les num√©ros de port
29

Transcodage

d√©bit faible

30

S√©curit√©
I Authentification des participants I Autorisation des participants I Int√©grit√© de donn√©es I Confidentialit√© de donn√©es
31

Plan
I Introduction I Communication en temps r√©el I RTP
I Pourquoi un autre protocole de transport ? I S√©paration donn√©es/contr√¥le I Profiles diff√©rentes pour applications diff√©rentes I Les paquets RTP I Les paquets RTCP
I Limitation de d√©bit RTCP I RTP et le temps r√©el
32

Pourquoi un autre protocole de transport ?
I Pourquoi pas TCP ?
I TCP exige la fiabilit√© √† 100% I TCP favorise la fiabilit√© au d√©pens des d√©lais I TCP existe seulement en version unicast
I Pourquoi pas UDP ?
I UDP fournit peu d‚Äôoutils : I Les num√©ros de port pour le d√©multiplexage I Un checksum
I RTP est adapt√© aux besoins du temps r√©el I RTP est l√©ger et flexible
33

S√©paration donn√©es/contr√¥le
I RTP consiste en deux protocoles :
I RTP pour l‚Äôacheminement de donn√©es I RTCP pour √©changer les messages de contr√¥le
I Les diff√©rences avec TCP :
I Chaque paquet TCP contient des champs de contr√¥le : I Acquittements, taille de la fen√™tre, etc. I Solution adapt√© pour une boucle de contr√¥le √©troite
I RTP fonctionne en multipoint I RTP n‚Äôexige pas la fiabilit√© √† 100%
I Deux num√©ros de ports voisins
I Par exemple : donn√©es port 12040, contr√¥le port 12041
34

Diff√©rentes profiles
I Un solution n‚Äôest pas adapt√© √† toutes les applications
I Par exemple il existe plusieurs codecs audio I Chaque codec √† son propre horodatage I Les codecs vid√©o ont encore d‚Äôautres horodatages
I RTP (RFC 3550) fournit un cadre I Les ¬´ profiles ¬ª (RFC 3551) fournissent les d√©tails
I Quelques profiles audio : I GSM, PCMA, G.722
I Quelques profiles vid√©o : I JPEG, H.261, MPEG 1 et MPEG 2
35

Les paquets RTP

0

1

2

3

01234567890123456789012345678901

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|V=2|P|X| CC |M|

PT

|

sequence number

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

timestamp

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

synchronization source (SSRC) identifier

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

|

:

data

:

:

....

:

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

V : version P : padding (at end of data) X : extension (after the header) CC : CSRC count(additional sources) M : marker (profile specific) PT : packet type

36

A propos des paquets RTP
I Un format simple, principalement :
I Identificateur de source (SSRC) I Type de paquet (PT) I Num√©ro de s√©quence I Estampille temporelle I Donn√©es
I Longueur et num√©ro de port dans l‚Äôen-t√™te UDP I Peu de surcharge
I Douze octets d‚Äôen-t√™te (par rapport √† 20 pour TCP) I Possibilit√© d‚Äôajouter des extensions
37

SSRC : synchronization source identifier
I Identifiant d‚Äôun flux de paquets
I A chaque SSRC correspond : I Une espace de num√©ros de s√©quence I Une espace temporelle
I Une application peut avoir plusieurs SSRCs I Par exemple : un pour l‚Äôaudio, un pour le vid√©o
I Globalement unique
I 232 = 4,3 x 109 valeurs possibles I Choisi √† l‚Äôal√©atoire I Algorithme de d√©tection de collisions
38

Ind√©pendance de la couche inf√©rieure
I Le SSRC est ind√©pendant de l‚Äôadresse machine
I RTP fonctionne sur IPv4, IPv6, ou d‚Äôautres protocoles
I On s√©pare les couches r√©seau et transport
39

PT : packet type

PT

encoding media type clock rate channels

name

(Hz)

___________________________________________________

0

PCMU

A

8000

1

2

G726-32

A

8000

1

3

GSM

A

8000

1

5

DVI4

A

8000

1

6

DVI4

A

16000

1

7

LPC

A

8000

1

8

PCMA

A

8000

1

9

G722

A

8000

1

10

L16

A

44100

2

11

L16

A

44100

1

12

QCELP

A

8000

1

14

MPA

A

90000

?

15

G728

A

8000

1

16

DVI4

A

11025

1

17

DVI4

A

22050

1

18

G729

A

8000

1

25

CelB

V

90000

26

JPEG

V

90000

28

nv

V

90000

31

H261

V

90000

32

MPV

V

90000

96-127 dynamic

?

40

Num√©ro de s√©quence
I Permet de reconstruire l‚Äôordre de paquets
I Mais aucun m√©canisme de retransmission I Simplement un support pour l‚Äôapplication
I Deux octets : 216 = 65 536 num√©ros possibles
I Une espace de num√©ros par SSRC I Num√©ro initial choisi √† l‚Äôal√©atoire
I Facilite la confidentialit√© par l‚Äôencryption I Augmente par 1 m√™me si l‚Äôhorloge n‚Äôavance pas
41

Estampille temporelle
I Essentielle pour la lecture des paquets
I Sert aussi √† calculer la gigue
I Les unit√©s sont d√©pendants de l‚Äôapplication I Quatre octets : 232 = 4,3 x 109 valeurs possibles
I Une espace de valeurs par SSRC I Valeur initiale choisie √† l‚Äôal√©atoire
I Facilite la confidentialit√© par l‚Äôencryption I Augmente dans une mani√®re r√©guli√®re
I N‚Äôaugmente pas s‚Äôil s‚Äôagit d‚Äôune m√™me trame
42

Les paquets RTCP

0

1

2

3

01234567890123456789012345678901

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|V=2|P| SC = n |

PT

|

length

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

SSRC of receiver

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

:

information regarding SSRC 1

:

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

:

information regarding SSRC 2

:

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

:

:

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

:

information regarding SSRC n

:

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

V : version P : padding (at end of data) SC : source count PT : packet type

43

A propos des paquets RTCP
I Un cadre pour des rapports :
I Identificateur de r√©cepteur (SSRC) I Type de paquet (PT) I Longueur de paquet
I Il peut y avoir plusieurs paquets par paquet UDP I Nombre de sources
I Un rapport par source
I Plusieurs genres de rapport possibles
I Receiver Report (RR), Sender Report (SR), autres
44

Les rapports RR : Receiver Report

0

1

2

3

01234567890123456789012345678901

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

SSRC of source

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

| fraction lost |

cumulative number of packets lost

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

extended highest sequence number received

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

interarrival jitter

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

last SR (LSR)

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

delay since last SR (DLSR)

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

PT : 201

45

A propos des rapports RR
I Information sur chaque source (SSRC) :
I Num√©ro de s√©quence I Pertes
I Depuis le dernier rapport (en pourcentage) I Depuis le d√©but (en nombre brut) I Information concernant le RTT I RTT = ¬´ round trip time ¬ª I Temps aller-retour depuis la source I Ne demande pas de r√©ponse imm√©diat I Gigue
46

Le calcul du RTT

source

r√©cepteur

LSR WS1

SR

WR1

WS2

RR

RTT (WS2 ¬± LSR) ¬± DLSR

WR2 DLSR WR2 ¬± W R1
47

Le calcul de la gigue
source RTP1 WS1 RTP2 WS2
J‚Äô J  (D ¬± J)/16 gigue : d√©viation moyen de D

r√©cepteur
WR1
WR2 D _ (WR2 ¬± W S2)
¬± (WR1 ¬± W S1) |
48

Les rapports SR : Sender Report

0

1

2

3

01234567890123456789012345678901

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

NTP timestamp, most significant word

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

NTP timestamp, least significant word

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

RTP timestamp

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

sender‚Äôs packet count

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

sender‚Äôs octet count

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

PT : 200

Cet information va entre l‚Äôen-t√™te et les rapports RR
49

A propos des rapports SR
I Estampilles temporelles NTP
I Temps de l‚Äôhorloge murale I NTP = ¬´ Network Time Protocol ¬ª I Secondes depuis 0h UTC le 1 janvier 1900
I 32 premiers bits indiquent le nombre de secondes I 32 derniers bits indiquent la portion d‚Äôune seconde
I Estampille temporelle RTP
I Le temps √©quivalent en unit√©s de l‚Äôapplication
I Nombre de paquets, d‚Äôoctets depuis le d√©but
50

Les rapports SDES : Source Description

0

1

2

3

01234567890123456789012345678901

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

SSRC

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|

SDES items

|

|

...

|

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

PT : 202
Information descriptif √† propos de la source
51

Exemples des rapports SDES
I CNAME : doe@sleepy.megacor p.com
I Nom constant √† travers des SSRCs
I NAME : J ohn Doe, Bit Recycler , Megacor p I EMAIL : J ohn.Doe@megacor p.com I PHONE : +1 908 555 1212 I LOC : Mur r ay Hill, New J er sey I TOOL : videot ool 1.2 I NOTE : ¬´ ligne occup√©e ¬ª I PRIV : usage priv√©
52

Autres rapports RTCP
I BYE
I Pour terminer une session RTP
I APP
I Sp√©cifique √† l‚Äôapplication
I XR (RFC 3611)
I Rapports d√©taill√©s de pertes et de d√©lais I M√©triques VoIP
I Propos√© :
I Acquittements pour RTP en unicast
53

Plan
I Introduction I Communication en temps r√©el I RTP I Limitation de d√©bit RTCP I RTP et le temps r√©el
54

Probl√®me de r√©sistance au facteur d‚Äô√©chelle

D√©bit RTP = 10 Kbps

D√©bit RTP = 10 Kbps

nn==33

nn==1155

D√©bit RTCP = 0,5 Kbps

X D√©bit RTCP = 2,5 Kbps ?
D√©bit RTCP = 0,5 Kbps
55

Un algorithme distribu√©
I Soit :
I G = d√©bit RTP (connu par tout le monde) I G
 = d√©bit RTCP = 0,05 G I G

 = d√©bit RTCP des r√©cepteurs = 0,75 G
 I Q = nombre de r√©cepteurs (estim√©) I 7 = taille moyenne des paquets RTCP (estim√©e) I I = fr√©quence cible d‚Äô√©mission = G

 / Q7
I D√©lai entre √©mission de paquets RTCP :
I Choisi √† l‚Äôal√©atoire entre 0,5/I et 1,5/I
56

Estimation du nombre de r√©cepteurs
I Chaque participant compte les participants
I Arriv√© d‚Äôun SR : compte une source I Arriv√© d‚Äôun RR : compte un r√©cepteur
I S‚Äôil s‚Äôagit d‚Äôun nouveau participant
I Il n‚Äôa pas encore eu le temps de compter I Il attend une intervalle minimale
57

Plan
I Introduction I Communication en temps r√©el I RTP I Limitation de d√©bit RTCP I RTP et le temps r√©el
58

Rappel des besoins
I Horodatage des donn√©es I Synchronisation des flux I R√©sistance contre les pertes, duplicatas, mauvais ordre I Identification de participants I Surveillance de l‚Äô√©tat de la connexion I Contr√¥le de flux I Contr√¥le de congestion I Besoins avanc√©s :
I Support pour le transcodage de donn√©es I S√©curit√© de donn√©es
59

Horodatage
I Estampille temporelle RTP
I Sp√©cifique √† l‚Äôapplication I Pour la lecture des donn√©es
60

Synchronisation des flux
I Estampille temporelle NTP
I Temps de l‚Äôhorloge murale I Coordination entre les estampilles d‚Äôapplications
61

R√©sistance contre les pertes, etc.
I R√©colte d‚Äôinformations :
I Num√©ro de s√©quence RTP I Taux de pertes I Nombre de paquets perdus
I Pas de m√©canisme int√©gr√©
I A l‚Äôapplication de r√©agir I Chaque application √† ses propres besoins
I Exemple : redondance audio I Exemple : protection de trames I en MPEG
62

Identification de participants
I CNAME
I Exemple : doe@sleepy.megacor p.com I Unique et constant √† travers les flux
I SSRC
I Num√©ro unique par participant par flux
I Informations SDES
I Informations suppl√©mentaires
63

Surveillance de l‚Äô√©tat de la connexion
I Les RR
I Pertes depuis le dernier rapport I Pertes depuis le d√©but I Information concernant le RTT I Gigue
I D‚Äôautres rapports
I Les XR : information d√©taill√© sur pertes, d√©lais, m√©triques VoIP
64

Contr√¥le de flux
I Donn√©es RTP
I Pas de m√©canismes de contr√¥le de flux
I Rapports RTCP
I M√©canisme de limitation du d√©bit des rapports I Typiquement √† 5% du d√©bit des donn√©es RTP
65

Contr√¥le de congestion
I Pas de m√©canisme dans l‚ÄôRTP I RTCP fourni des informations
I Taux de pertes, par exemple I Ils peuvent √™tre utilis√©s par une application
66

Support pour le transcodage de donn√©es
I RTP permet de m√©langer les flux
I Plusieurs SSRCs attach√©s √† un flux m√©lang√©
I Les d√©tails d√©pendent de l‚Äôapplication
67

S√©curit√© de donn√©es
I RTP est compatible avec la s√©curit√©
I Num√©ro de s√©quence initialis√© √† une valeur al√©atoire I Pareil pour l‚Äôestampille temporel
I L‚Äôencryption n‚Äôest pas encore dans le norme
I Un sujet de travail actuel
68

