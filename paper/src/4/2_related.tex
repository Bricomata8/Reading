\section{Related work} \label{sec:Related work}


Transmission parameter configuration mechanisms such as ADR scheme need to be developed to fit each application requirement.
Taking into account low power consumption,
	solutions running on LoRa node should be as simple as possible and has been required in LoRaWAN specification.
However,
	LoRa network server could run complex management mechanism,
	which can be developed to improve network performance.
Therefore,
	the related works discussed in this paper focus on server-side mechanism.
The basic ADR scheme \cite{LorawanSpecification} provided by LoRaWAN predicts channel conditions using the maximum received \ac{SNR} in the last 20 packets.
The basic ADR scheme is sufficient when the variance of the channel is low, 
	it reduces the interference compared with using the static data rate \cite{bor_lora_2016} ,\cite{slabicki_adaptive_2018}.
However,
	their simplicity causes many potential drawbacks.
First,
	the diversity of LoRa Gateway models that measures \ac{SNR} make the measurement inaccurate as a result of hardware calibration and interfering transmissions.
Second,
	selecting the maximum \ac{SNR} each 20 packets received could be a very long period in many IoT applications that require less uplink transmission.
Third,
	transmission parameters adjustment considers only the link of a single node.
If many LoRa nodes are connected to the near gateway,
	all nodes connected to this gateway will use the fastest data rate.
In this case,
	the number of LoRa nodes using the same data rate will increase and the possibility of collisions also increases dramatically.
Most of researchers in the literature utilize \ac{SNR} or \ac{RSSI} information to control \ac{Tx} and \ac{SF}.
For example,
	the authors in \cite{slabicki_adaptive_2018} slightly modify the basic ADR scheme by replacing the maximum \ac{SNR} with the average function.

%

In \cite{cuomo_explora_2017},
	EXPLoRa-SF selects spreading factors based on the total number of connected nodes and EXPLoRa-AT equalizes the time-on-air of packets transmitted at the different spreading factors.
In addition,
	the authors in \cite{bor_lora_2017} propose a link probing regime to select transmission parameters in order to achieve lower energy consumption.
In \cite{reynders_power_2017},
	the authors present a scheme to optimize the packet error rate fairness to avoid near-far problems.

Some seminal papers on LoRaWAN such as \cite{petajajarvi_coverage_2015b},
	\cite{wixted_evaluation_2016} test the coverage range and packet loss ratio by means of empirical measurements,
	but without investigating the impact of the parameters setting on the performance.

Other works,
	such as \cite{bor_lora_2017},
	examine the impact of the modulation parameters on the single communication link between an ED and its GW,
	without considering more complex network configurations.
2 Note that,
	from the GW perspective,
	ACK packets are not distinguishable from any other DL packet and,
	hence,
	are subject to the same rules and constraints.

To obtain more general results,
	\cite{li_2d_2016} uses a stochastic geometry model to jointly analyze interference in the time and frequency domains.
It is observed that when implementing a packet repetition strategy,
	i.e.,
	transmitting each message multiple times,
	the failure probability reduces,
	but clearly the average throughput decreases because of the introduced redundancy.

In \cite{ferre_collision_2017a} the author proposes closed-form expressions for collision and packet loss probabilities and,
	under the assumption of perfect orthogonality between SFs,
	it is shown that the Poisson distributed process does not accurately model packet collisions in LoRaWAN.
Network throughput,
	latency and collision rate for uplink transmissions are analyzed in \cite{sorensen_analysis_2017} that,
	using queueing theory and considering the Aloha channel access protocol and the regulatory constrains in the use of the different sub-bands,
	points out the importance of a clever splitting of the traffic in the available sub-bands to improve the network performance.

In \cite{bankov_mathematical_2017a} the authors present a mathematical model of the network performance,
	taking into account factors such as the capture effect and a realistic distribution of SFs in the network.
However,
	the model does not include some important network parameters,
	preventing the study of their effect on the network performance.

A step further is made in \cite{capuzzo_mathematical_2018} where the authors develop a model that makes it possible to consider various parameters configurations,
	such as the number of ACKs sent by the GW,
	the SF used for the downlink transmissions,
	and the DC constraints imposed by the regulations.
In this work,
	however,
	multiple retransmissions have not been considered.

The study presented in \cite{pop_does_2017} features a system-level analysis of LoRaWAN,
	and gives significant insights on bottlenecks and network behavior in presence of downlink traffic.
However,
	besides pointing out some flaws in the design of the LoRaWAN medium access scheme,
	this work does not propose any way to improve the performance of the technology.


In \cite{vandenabeele_scalability_2017},
	system-level simulations are again employed to assess the performance of confirmed and unconfirmed messages and show the detrimental impact of confirmation traffic on the overall network capacity and throughput.
Here,
	the only proposed solution is the use of multiple gateways,
	without deeply investigating the specificities of the LoRaWAN standard.


In \cite{reynders_lorawan_2018} a module for the ns-3 simulator is proposed and used for a similar scope,
	comparing the single and multi gateway scenarios and the use of unconfirmed and confirmed messages.
In this case,
	the authors correctly implement the GWâ€™s multiple reception paths,
	but do not take into account their association to a specific UL frequency,
	which usually occurs during network setup:
	indeed,
	the number of packets that can be received simultaneously on a given frequency can not be greater than the number of reception paths that are listening on that frequency.
Also in this case,
	the study only focuses on the performance analysis,
	without proposing any improvement.


The authors in \cite{hauser_proposal_2017},
	\cite{slabicki_adaptive_2018} target the original ADR algorithm proposed by \cite{thethingsnetwork},
	suggesting possible ameliorations.
Generally,
	the modified algorithms yield an increase of network scalability,
	fairness among nodes,
	packet delivery ratio and robustness to variable channel conditions.



In \cite{reynders_power_2017},
	the authors compute the optimal SFs distribution to minimize the collision 4 probability and propose a scheme to improve the fairness for nodes far from the station by optimally assigning SFs and transmit power values to the network nodes,
	in order to reduce the packet error rate.



In \cite{kouvelas_employing_2018} it is shown how the use of a persistent-Carrier Sense Multiple Access (p-CSMA) MAC protocol when transmitting UL messages can improve the packet reception ratio.
However,
	attention must be payed to the fact that having many EDs that defer their transmission because of a low value of p may lead to channel under-utilization.



In \cite{zucchetto_uncoordinated_2017},
	the authors investigate,
	via simulation,
	the impact of \ac{DC} restrictions in LPWAN scenarios,
	showing that rate adaptation capabilities are indeed pivotal to maintain reasonable level of performance when the coverage range and the cell load increase.
However,
	the effect of other parameters setting on the network performance is not considered.



